"use strict";(self.webpackChunkbitx=self.webpackChunkbitx||[]).push([[703],{7703:(t,e,r)=>{r.d(e,{default:()=>zs});var n=r(9308),i=r(9226),o=r(1778),s=r(8346),a=r(9035),u=r(7731),l=(r(1866),r(261),r(5121),r(4498),r(4042),r(3774),r(261).Buffer),c=r(4501),h=i.q,p=i.t,f=i.s.Buffer,d=new Array(16);function g(){p.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function v(t,e){return t<<e|t>>>32-e}function y(t,e,r,n,i,o,s){return v(t+(e&r|~e&n)+i+o|0,s)+e|0}function w(t,e,r,n,i,o,s){return v(t+(e&n|r&~n)+i+o|0,s)+e|0}function E(t,e,r,n,i,o,s){return v(t+(e^r^n)+i+o|0,s)+e|0}function m(t,e,r,n,i,o,s){return v(t+(r^(e|~n))+i+o|0,s)+e|0}h(g,p),g.prototype._update=function(){for(var t=d,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=y(r,n,i,o,t[0],3614090360,7),o=y(o,r,n,i,t[1],3905402710,12),i=y(i,o,r,n,t[2],606105819,17),n=y(n,i,o,r,t[3],3250441966,22),r=y(r,n,i,o,t[4],4118548399,7),o=y(o,r,n,i,t[5],1200080426,12),i=y(i,o,r,n,t[6],2821735955,17),n=y(n,i,o,r,t[7],4249261313,22),r=y(r,n,i,o,t[8],1770035416,7),o=y(o,r,n,i,t[9],2336552879,12),i=y(i,o,r,n,t[10],4294925233,17),n=y(n,i,o,r,t[11],2304563134,22),r=y(r,n,i,o,t[12],1804603682,7),o=y(o,r,n,i,t[13],4254626195,12),i=y(i,o,r,n,t[14],2792965006,17),r=w(r,n=y(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=w(o,r,n,i,t[6],3225465664,9),i=w(i,o,r,n,t[11],643717713,14),n=w(n,i,o,r,t[0],3921069994,20),r=w(r,n,i,o,t[5],3593408605,5),o=w(o,r,n,i,t[10],38016083,9),i=w(i,o,r,n,t[15],3634488961,14),n=w(n,i,o,r,t[4],3889429448,20),r=w(r,n,i,o,t[9],568446438,5),o=w(o,r,n,i,t[14],3275163606,9),i=w(i,o,r,n,t[3],4107603335,14),n=w(n,i,o,r,t[8],1163531501,20),r=w(r,n,i,o,t[13],2850285829,5),o=w(o,r,n,i,t[2],4243563512,9),i=w(i,o,r,n,t[7],1735328473,14),r=E(r,n=w(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=E(o,r,n,i,t[8],2272392833,11),i=E(i,o,r,n,t[11],1839030562,16),n=E(n,i,o,r,t[14],4259657740,23),r=E(r,n,i,o,t[1],2763975236,4),o=E(o,r,n,i,t[4],1272893353,11),i=E(i,o,r,n,t[7],4139469664,16),n=E(n,i,o,r,t[10],3200236656,23),r=E(r,n,i,o,t[13],681279174,4),o=E(o,r,n,i,t[0],3936430074,11),i=E(i,o,r,n,t[3],3572445317,16),n=E(n,i,o,r,t[6],76029189,23),r=E(r,n,i,o,t[9],3654602809,4),o=E(o,r,n,i,t[12],3873151461,11),i=E(i,o,r,n,t[15],530742520,16),r=m(r,n=E(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=m(o,r,n,i,t[7],1126891415,10),i=m(i,o,r,n,t[14],2878612391,15),n=m(n,i,o,r,t[5],4237533241,21),r=m(r,n,i,o,t[12],1700485571,6),o=m(o,r,n,i,t[3],2399980690,10),i=m(i,o,r,n,t[10],4293915773,15),n=m(n,i,o,r,t[1],2240044497,21),r=m(r,n,i,o,t[8],1873313359,6),o=m(o,r,n,i,t[15],4264355552,10),i=m(i,o,r,n,t[6],2734768916,15),n=m(n,i,o,r,t[13],1309151649,21),r=m(r,n,i,o,t[4],4149444226,6),o=m(o,r,n,i,t[11],3174756917,10),i=m(i,o,r,n,t[2],718787259,15),n=m(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=f.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};var b=g,_={exports:{}},I=i.s.Buffer;function T(t,e){this._block=I.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}T.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=I.from(t,e));for(var r=this._block,n=this._blockSize,i=t.length,o=this._len,s=0;s<i;){for(var a=o%n,u=Math.min(i-s,n-a),l=0;l<u;l++)r[a+l]=t[s+l];s+=u,(o+=u)%n===0&&this._update(r)}return this._len+=i,this},T.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},T.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var S=T,x=i.q,O=S,R=i.s.Buffer,A=[1518500249,1859775393,-1894007588,-899497514],N=new Array(80);function P(){this.init(),this._w=N,O.call(this,64,56)}function L(t){return t<<5|t>>>27}function M(t){return t<<30|t>>>2}function k(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}x(P,O),P.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},P.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0;a<16;++a)e[a]=t.readInt32BE(4*a);for(;a<80;++a)e[a]=e[a-3]^e[a-8]^e[a-14]^e[a-16];for(var u=0;u<80;++u){var l=~~(u/20),c=L(r)+k(l,n,i,o)+s+e[u]+A[l]|0;s=o,o=i,i=M(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},P.prototype._hash=function(){var t=R.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var U=P,D=i.q,$=S,C=i.s.Buffer,G=[1518500249,1859775393,-1894007588,-899497514],B=new Array(80);function F(){this.init(),this._w=B,$.call(this,64,56)}function V(t){return t<<1|t>>>31}function K(t){return t<<5|t>>>27}function q(t){return t<<30|t>>>2}function j(t,e,r,n){return 0===t?e&r|~e&n:2===t?e&r|e&n|r&n:e^r^n}D(F,$),F.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},F.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0;a<16;++a)e[a]=t.readInt32BE(4*a);for(;a<80;++a)e[a]=V(e[a-3]^e[a-8]^e[a-14]^e[a-16]);for(var u=0;u<80;++u){var l=~~(u/20),c=K(r)+j(l,n,i,o)+s+e[u]+G[l]|0;s=o,o=i,i=q(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0},F.prototype._hash=function(){var t=C.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t};var X=F,W=i.q,H=S,z=i.s.Buffer,Y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Z=new Array(64);function Q(){this.init(),this._w=Z,H.call(this,64,56)}function J(t,e,r){return r^t&(e^r)}function tt(t,e,r){return t&e|r&(t|e)}function et(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function rt(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function nt(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function it(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}W(Q,H),Q.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Q.prototype._update=function(t){for(var e=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,s=0|this._e,a=0|this._f,u=0|this._g,l=0|this._h,c=0;c<16;++c)e[c]=t.readInt32BE(4*c);for(;c<64;++c)e[c]=it(e[c-2])+e[c-7]+nt(e[c-15])+e[c-16]|0;for(var h=0;h<64;++h){var p=l+rt(s)+J(s,a,u)+Y[h]+e[h]|0,f=et(r)+tt(r,n,i)|0;l=u,u=a,a=s,s=o+p|0,o=i,i=n,n=r,r=p+f|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=s+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},Q.prototype._hash=function(){var t=z.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var ot=Q,st=i.q,at=ot,ut=S,lt=i.s.Buffer,ct=new Array(64);function ht(){this.init(),this._w=ct,ut.call(this,64,56)}st(ht,at),ht.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},ht.prototype._hash=function(){var t=lt.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var pt=ht,ft=i.q,dt=S,gt=i.s.Buffer,vt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],yt=new Array(160);function wt(){this.init(),this._w=yt,dt.call(this,128,112)}function Et(t,e,r){return r^t&(e^r)}function mt(t,e,r){return t&e|r&(t|e)}function bt(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function _t(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function It(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Tt(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function St(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function xt(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Ot(t,e){return t>>>0<e>>>0?1:0}ft(wt,dt),wt.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},wt.prototype._update=function(t){for(var e=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,a=0|this._fh,u=0|this._gh,l=0|this._hh,c=0|this._al,h=0|this._bl,p=0|this._cl,f=0|this._dl,d=0|this._el,g=0|this._fl,v=0|this._gl,y=0|this._hl,w=0;w<32;w+=2)e[w]=t.readInt32BE(4*w),e[w+1]=t.readInt32BE(4*w+4);for(;w<160;w+=2){var E=e[w-30],m=e[w-30+1],b=It(E,m),_=Tt(m,E),I=St(E=e[w-4],m=e[w-4+1]),T=xt(m,E),S=e[w-14],x=e[w-14+1],O=e[w-32],R=e[w-32+1],A=_+x|0,N=b+S+Ot(A,_)|0;N=(N=N+I+Ot(A=A+T|0,T)|0)+O+Ot(A=A+R|0,R)|0,e[w]=N,e[w+1]=A}for(var P=0;P<160;P+=2){N=e[P],A=e[P+1];var L=mt(r,n,i),M=mt(c,h,p),k=bt(r,c),U=bt(c,r),D=_t(s,d),$=_t(d,s),C=vt[P],G=vt[P+1],B=Et(s,a,u),F=Et(d,g,v),V=y+$|0,K=l+D+Ot(V,y)|0;K=(K=(K=K+B+Ot(V=V+F|0,F)|0)+C+Ot(V=V+G|0,G)|0)+N+Ot(V=V+A|0,A)|0;var q=U+M|0,j=k+L+Ot(q,U)|0;l=u,y=v,u=a,v=g,a=s,g=d,s=o+K+Ot(d=f+V|0,f)|0,o=i,f=p,i=n,p=h,n=r,h=c,r=K+j+Ot(c=V+q|0,V)|0}this._al=this._al+c|0,this._bl=this._bl+h|0,this._cl=this._cl+p|0,this._dl=this._dl+f|0,this._el=this._el+d|0,this._fl=this._fl+g|0,this._gl=this._gl+v|0,this._hl=this._hl+y|0,this._ah=this._ah+r+Ot(this._al,c)|0,this._bh=this._bh+n+Ot(this._bl,h)|0,this._ch=this._ch+i+Ot(this._cl,p)|0,this._dh=this._dh+o+Ot(this._dl,f)|0,this._eh=this._eh+s+Ot(this._el,d)|0,this._fh=this._fh+a+Ot(this._fl,g)|0,this._gh=this._gh+u+Ot(this._gl,v)|0,this._hh=this._hh+l+Ot(this._hl,y)|0},wt.prototype._hash=function(){var t=gt.allocUnsafe(64);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var Rt=wt,At=i.q,Nt=Rt,Pt=S,Lt=i.s.Buffer,Mt=new Array(160);function kt(){this.init(),this._w=Mt,Pt.call(this,128,112)}At(kt,Nt),kt.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},kt.prototype._hash=function(){var t=Lt.allocUnsafe(48);function e(e,r,n){t.writeInt32BE(e,n),t.writeInt32BE(r,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var Ut=kt,Dt=_.exports=function(t){t=t.toLowerCase();var e=Dt[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};Dt.sha=U,Dt.sha1=X,Dt.sha224=pt,Dt.sha256=ot,Dt.sha384=Ut,Dt.sha512=Rt;var $t=_.exports;const Ct=(0,i.c)($t);var Gt=i.s.Buffer,Bt=i.r.Transform,Ft=o.s;function Vt(t){Bt.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}(0,i.q)(Vt,Bt),Vt.prototype.update=function(t,e,r){"string"==typeof t&&(t=Gt.from(t,e));var n=this._update(t);return this.hashMode?this:(r&&(n=this._toString(n,r)),n)},Vt.prototype.setAutoPadding=function(){},Vt.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},Vt.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},Vt.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},Vt.prototype._transform=function(t,e,r){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){n=i}finally{r(n)}},Vt.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(r){e=r}t(e)},Vt.prototype._finalOrDigest=function(t){var e=this.__final()||Gt.alloc(0);return t&&(e=this._toString(e,t,!0)),e},Vt.prototype._toString=function(t,e,r){if(this._decoder||(this._decoder=new Ft(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return r&&(n+=this._decoder.end()),n};var Kt=Vt,qt=i.q,jt=b,Xt=i.u,Wt=$t,Ht=Kt;function zt(t){Ht.call(this,"digest"),this._hash=t}qt(zt,Ht),zt.prototype._update=function(t){this._hash.update(t)},zt.prototype._final=function(){return this._hash.digest()};var Yt=i.s.Buffer;var Zt=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),u=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function c(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return Yt.alloc(0);for(var r=0,n=0,i=0;t[r]===a;)n++,r++;for(var o=(t.length-r)*u+1>>>0,l=new Uint8Array(o);t[r];){var c=e[t.charCodeAt(r)];if(255===c)return;for(var h=0,p=o-1;(0!==c||h<i)&&-1!==p;p--,h++)c+=s*l[p]>>>0,l[p]=c%256>>>0,c=c/256>>>0;if(0!==c)throw new Error("Non-zero carry");i=h,r++}for(var f=o-i;f!==o&&0===l[f];)f++;var d=Yt.allocUnsafe(n+(o-f));d.fill(0,0,n);for(var g=n;f!==o;)d[g++]=l[f++];return d}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=Yt.from(e)),!Yt.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var r=0,n=0,i=0,o=e.length;i!==o&&0===e[i];)i++,r++;for(var u=(o-i)*l+1>>>0,c=new Uint8Array(u);i!==o;){for(var h=e[i],p=0,f=u-1;(0!==h||p<n)&&-1!==f;f--,p++)h+=256*c[f]>>>0,c[f]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");n=p,i++}for(var d=u-n;d!==u&&0===c[d];)d++;for(var g=a.repeat(r);d<u;++d)g+=t.charAt(c[d]);return g},decodeUnsafe:c,decode:function(t){var e=c(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},Qt=Zt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const Jt=(0,i.c)(Qt);var te=Qt,ee=i.s.Buffer,re=function(t){return"md5"===(t=t.toLowerCase())?new jt:"rmd160"===t||"ripemd160"===t?new Xt:new zt(Wt(t))},ne=function(t){function e(e){var r=e.slice(0,-4),n=e.slice(-4),i=t(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(e){var r=t(e);return te.encode(ee.concat([e,r],e.length+4))},decode:function(t){var r=e(te.decode(t));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(t){var r=te.decodeUnsafe(t);if(r)return e(r)}}};var ie=ne((function(t){var e=re("sha256").update(t).digest();return re("sha256").update(e).digest()}));const oe=(0,i.c)(ie);function se(t){var e=l.alloc(1+4*t.length);return e[0]=t.length,t.forEach((function(t,r){e.writeUInt32BE(t,1+4*r)})),e}function ae(t){return se(t?le(t):[])}function ue(t){return n.s.fromPathArray(t).toString()}function le(t){return n.s.fromString(t).toPathArray()}function ce(t){var e=oe.decode(t);return e.slice(e.length-33)}function he(t){var e=oe.decode(t);return{chaincode:e.slice(13,45),pubkey:e.slice(e.length-33),version:e.readUInt32BE(0)}}var pe={exports:{}};var fe={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const de="object"==typeof c&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return console.error("SEMVER",...e)}:()=>{};var ge=de;!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r}=fe,n=ge,i=(e=t.exports={}).re=[],o=e.safeRe=[],s=e.src=[],a=e.t={};let u=0;const l=(t,e,r)=>{const l=e.split("\\s*").join("\\s{0,1}").split("\\s+").join("\\s"),c=u++;n(t,c,e),a[t]=c,s[c]=e,i[c]=new RegExp(e,r?"g":void 0),o[c]=new RegExp(l,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})\\.(${s[a.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})\\.(${s[a.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${s[a.NUMERICIDENTIFIER]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${s[a.NUMERICIDENTIFIERLOOSE]}|${s[a.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${s[a.PRERELEASEIDENTIFIER]}(?:\\.${s[a.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${s[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[a.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${s[a.BUILDIDENTIFIER]}(?:\\.${s[a.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${s[a.MAINVERSION]}${s[a.PRERELEASE]}?${s[a.BUILD]}?`),l("FULL",`^${s[a.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${s[a.MAINVERSIONLOOSE]}${s[a.PRERELEASELOOSE]}?${s[a.BUILD]}?`),l("LOOSE",`^${s[a.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${s[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${s[a.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:\\.(${s[a.XRANGEIDENTIFIER]})(?:${s[a.PRERELEASE]})?${s[a.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[a.XRANGEIDENTIFIERLOOSE]})(?:${s[a.PRERELEASELOOSE]})?${s[a.BUILD]}?)?)?`),l("XRANGE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${s[a.GTLT]}\\s*${s[a.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),l("COERCERTL",s[a.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${s[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",l("TILDE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${s[a.LONETILDE]}${s[a.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${s[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",l("CARET",`^${s[a.LONECARET]}${s[a.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${s[a.LONECARET]}${s[a.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${s[a.GTLT]}\\s*(${s[a.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${s[a.GTLT]}\\s*(${s[a.LOOSEPLAIN]}|${s[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${s[a.XRANGEPLAIN]})\\s+-\\s+(${s[a.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${s[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[a.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(pe,pe.exports);var ve=pe.exports;const ye=Object.freeze({loose:!0}),we=Object.freeze({});var Ee=t=>t?"object"!=typeof t?ye:t:we;const me=/^[0-9]+$/,be=(t,e)=>{const r=me.test(t),n=me.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1};var _e={compareIdentifiers:be,rcompareIdentifiers:(t,e)=>be(e,t)};const Ie=ge,{MAX_LENGTH:Te,MAX_SAFE_INTEGER:Se}=fe,{safeRe:xe,t:Oe}=ve,Re=Ee,{compareIdentifiers:Ae}=_e;var Ne=class t{constructor(e,r){if(r=Re(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Te)throw new TypeError(`version is longer than ${Te} characters`);Ie("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=e.trim().match(r.loose?xe[Oe.LOOSE]:xe[Oe.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Se||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Se||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Se||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<Se)return e}return t})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ie("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Ae(this.major,e.major)||Ae(this.minor,e.minor)||Ae(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const t=this.prerelease[r],n=e.prerelease[r];if(Ie("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return Ae(t,n)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{const t=this.build[r],n=e.build[r];if(Ie("prerelease compare",r,t,n),void 0===t&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===t)return-1;if(t!==n)return Ae(t,n)}while(++r)}inc(t,e,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,r),this.inc("pre",e,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,r),this.inc("pre",e,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(r)?1:0;if(!e&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(e===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let n=[e,t];!1===r&&(n=[e]),0===Ae(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};const Pe=Ne;var Le=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t instanceof Pe)return t;try{return new Pe(t,e)}catch(n){if(!r)return null;throw n}};const Me=Le;var ke=(t,e)=>{const r=Me(t,e);return r?r.version:null};const Ue=Le;var De=(t,e)=>{const r=Ue(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};const $e=Ne;var Ce=(t,e,r,n,i)=>{"string"==typeof r&&(i=n,n=r,r=void 0);try{return new $e(t instanceof $e?t.version:t,r).inc(e,n,i).version}catch{return null}};const Ge=Le;var Be=(t,e)=>{const r=Ge(t,null,!0),n=Ge(e,null,!0),i=r.compare(n);if(0===i)return null;const o=i>0,s=o?r:n,a=o?n:r,u=!!s.prerelease.length;if(a.prerelease.length&&!u)return a.patch||a.minor?s.patch?"patch":s.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};const Fe=Ne;var Ve=(t,e)=>new Fe(t,e).major;const Ke=Ne;var qe=(t,e)=>new Ke(t,e).minor;const je=Ne;var Xe=(t,e)=>new je(t,e).patch;const We=Le;var He=(t,e)=>{const r=We(t,e);return r&&r.prerelease.length?r.prerelease:null};const ze=Ne;var Ye=(t,e,r)=>new ze(t,r).compare(new ze(e,r));const Ze=Ye;var Qe=(t,e,r)=>Ze(e,t,r);const Je=Ye;var tr=(t,e)=>Je(t,e,!0);const er=Ne;var rr=(t,e,r)=>{const n=new er(t,r),i=new er(e,r);return n.compare(i)||n.compareBuild(i)};const nr=rr;var ir=(t,e)=>t.sort(((t,r)=>nr(t,r,e)));const or=rr;var sr=(t,e)=>t.sort(((t,r)=>or(r,t,e)));const ar=Ye;var ur=(t,e,r)=>ar(t,e,r)>0;const lr=Ye;var cr=(t,e,r)=>lr(t,e,r)<0;const hr=Ye;var pr=(t,e,r)=>0===hr(t,e,r);const fr=Ye;var dr=(t,e,r)=>0!==fr(t,e,r);const gr=Ye;var vr=(t,e,r)=>gr(t,e,r)>=0;const yr=Ye;var wr=(t,e,r)=>yr(t,e,r)<=0;const Er=pr,mr=dr,br=ur,_r=vr,Ir=cr,Tr=wr;var Sr=(t,e,r,n)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof r&&(r=r.version),t===r;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof r&&(r=r.version),t!==r;case"":case"=":case"==":return Er(t,r,n);case"!=":return mr(t,r,n);case">":return br(t,r,n);case">=":return _r(t,r,n);case"<":return Ir(t,r,n);case"<=":return Tr(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};const xr=Ne,Or=Le,{safeRe:Rr,t:Ar}=ve;var Nr,Pr,Lr,Mr,kr=(t,e)=>{if(t instanceof xr)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let r=null;if((e=e||{}).rtl){let e;for(;(e=Rr[Ar.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||e.index+e[0].length!==r.index+r[0].length)&&(r=e),Rr[Ar.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;Rr[Ar.COERCERTL].lastIndex=-1}else r=t.match(Rr[Ar.COERCE]);return null===r?null:Or(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};function Ur(){if(Pr)return Nr;Pr=1;class t{constructor(e,i){if(i=r(i),e instanceof t)return e.loose===!!i.loose&&e.includePrerelease===!!i.includePrerelease?e:new t(e.raw,i);if(e instanceof n)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((t=>this.parseRange(t))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!d(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){const r=((this.options.includePrerelease&&p)|(this.options.loose&&f))+":"+t,o=e.get(r);if(o)return o;const s=this.options.loose,g=s?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];t=t.replace(g,O(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(a[u.COMPARATORTRIM],l),i("comparator trim",t);let v=(t=(t=t.replace(a[u.TILDETRIM],c)).replace(a[u.CARETTRIM],h)).split(" ").map((t=>y(t,this.options))).join(" ").split(/\s+/).map((t=>x(t,this.options)));s&&(v=v.filter((t=>(i("loose invalid filter",t,this.options),!!t.match(a[u.COMPARATORLOOSE]))))),i("range list",v);const w=new Map,E=v.map((t=>new n(t,this.options)));for(const e of E){if(d(e))return[e];w.set(e.value,e)}w.size>1&&w.has("")&&w.delete("");const m=[...w.values()];return e.set(r,m),m}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>v(t,r)&&e.set.some((e=>v(e,r)&&t.every((t=>e.every((e=>t.intersects(e,r)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new o(t,this.options)}catch{return!1}for(let e=0;e<this.set.length;e++)if(R(this.set[e],t,this.options))return!0;return!1}}Nr=t;const e=new(0,s.P)({max:1e3}),r=Ee,n=Dr(),i=ge,o=Ne,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:h}=ve,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:f}=fe,d=t=>"<0.0.0-0"===t.value,g=t=>""===t.value,v=(t,e)=>{let r=!0;const n=t.slice();let i=n.pop();for(;r&&n.length;)r=n.every((t=>i.intersects(t,e))),i=n.pop();return r},y=(t,e)=>(i("comp",t,e),t=b(t,e),i("caret",t),t=E(t,e),i("tildes",t),t=I(t,e),i("xrange",t),t=S(t,e),i("stars",t),t),w=t=>!t||"x"===t.toLowerCase()||"*"===t,E=(t,e)=>t.trim().split(/\s+/).map((t=>m(t,e))).join(" "),m=(t,e)=>{const r=e.loose?a[u.TILDELOOSE]:a[u.TILDE];return t.replace(r,((e,r,n,o,s)=>{let a;return i("tilde",t,e,r,n,o,s),w(r)?a="":w(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:w(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(i("replaceTilde pr",s),a=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,i("tilde return",a),a}))},b=(t,e)=>t.trim().split(/\s+/).map((t=>_(t,e))).join(" "),_=(t,e)=>{i("caret",t,e);const r=e.loose?a[u.CARETLOOSE]:a[u.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,((e,r,o,s,a)=>{let u;return i("caret",t,e,r,o,s,a),w(r)?u="":w(o)?u=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(s)?u="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(i("replaceCaret pr",a),u="0"===r?"0"===o?`>=${r}.${o}.${s}-${a} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s}-${a} <${+r+1}.0.0-0`):(i("no pr"),u="0"===r?"0"===o?`>=${r}.${o}.${s}${n} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s} <${+r+1}.0.0-0`),i("caret return",u),u}))},I=(t,e)=>(i("replaceXRanges",t,e),t.split(/\s+/).map((t=>T(t,e))).join(" ")),T=(t,e)=>{t=t.trim();const r=e.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return t.replace(r,((r,n,o,s,a,u)=>{i("xRange",t,r,n,o,s,a,u);const l=w(o),c=l||w(s),h=c||w(a),p=h;return"="===n&&p&&(n=""),u=e.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&p?(c&&(s=0),a=0,">"===n?(n=">=",c?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",c?o=+o+1:s=+s+1),"<"===n&&(u="-0"),r=`${n+o}.${s}.${a}${u}`):c?r=`>=${o}.0.0${u} <${+o+1}.0.0-0`:h&&(r=`>=${o}.${s}.0${u} <${o}.${+s+1}.0-0`),i("xRange return",r),r}))},S=(t,e)=>(i("replaceStars",t,e),t.trim().replace(a[u.STAR],"")),x=(t,e)=>(i("replaceGTE0",t,e),t.trim().replace(a[e.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=t=>(e,r,n,i,o,s,a,u,l,c,h,p,f)=>`${r=w(n)?"":w(i)?`>=${n}.0.0${t?"-0":""}`:w(o)?`>=${n}.${i}.0${t?"-0":""}`:s?`>=${r}`:`>=${r}${t?"-0":""}`} ${u=w(l)?"":w(c)?`<${+l+1}.0.0-0`:w(h)?`<${l}.${+c+1}.0-0`:p?`<=${l}.${c}.${h}-${p}`:t?`<${l}.${c}.${+h+1}-0`:`<=${u}`}`.trim(),R=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let r=0;r<t.length;r++)if(i(t[r].semver),t[r].semver!==n.ANY&&t[r].semver.prerelease.length>0){const n=t[r].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0};return Nr}function Dr(){if(Mr)return Lr;Mr=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(n,i){if(i=r(i),n instanceof e){if(n.loose===!!i.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,i),this.options=i,this.loose=!!i.loose,this.parse(n),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(e){const r=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],o=e.match(r);if(!o)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new a(o[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(s("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new a(e,this.options)}catch{return!1}return o(e,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new u(t.value,n).test(this.value):""===t.operator?""===t.value||new u(this.value,n).test(t.semver):!((n=r(n)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===t.value)||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||o(this.semver,"<",t.semver,n)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||o(this.semver,">",t.semver,n)&&this.operator.startsWith("<")&&t.operator.startsWith(">"))}}Lr=e;const r=Ee,{safeRe:n,t:i}=ve,o=Sr,s=ge,a=Ne,u=Ur();return Lr}const $r=Ur();var Cr=(t,e,r)=>{try{e=new $r(e,r)}catch{return!1}return e.test(t)};const Gr=Ur();var Br=(t,e)=>new Gr(t,e).set.map((t=>t.map((t=>t.value)).join(" ").trim().split(" ")));const Fr=Ne,Vr=Ur();var Kr=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Vr(e,r)}catch{return null}return t.forEach((t=>{o.test(t)&&(!n||-1===i.compare(t))&&(n=t,i=new Fr(n,r))})),n};const qr=Ne,jr=Ur();var Xr=(t,e,r)=>{let n=null,i=null,o=null;try{o=new jr(e,r)}catch{return null}return t.forEach((t=>{o.test(t)&&(!n||1===i.compare(t))&&(n=t,i=new qr(n,r))})),n};const Wr=Ne,Hr=Ur(),zr=ur;var Yr=(t,e)=>{t=new Hr(t,e);let r=new Wr("0.0.0");if(t.test(r)||(r=new Wr("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){const e=t.set[n];let i=null;e.forEach((t=>{const e=new Wr(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":(!i||zr(e,i))&&(i=e);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}})),i&&(!r||zr(r,i))&&(r=i)}return r&&t.test(r)?r:null};const Zr=Ur();var Qr=(t,e)=>{try{return new Zr(t,e).range||"*"}catch{return null}};const Jr=Ne,tn=Dr(),{ANY:en}=tn,rn=Ur(),nn=Cr,on=ur,sn=cr,an=wr,un=vr;var ln=(t,e,r,n)=>{let i,o,s,a,u;switch(t=new Jr(t,n),e=new rn(e,n),r){case">":i=on,o=an,s=sn,a=">",u=">=";break;case"<":i=sn,o=un,s=on,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(nn(t,e,n))return!1;for(let l=0;l<e.set.length;++l){const r=e.set[l];let c=null,h=null;if(r.forEach((t=>{t.semver===en&&(t=new tn(">=0.0.0")),c=c||t,h=h||t,i(t.semver,c.semver,n)?c=t:s(t.semver,h.semver,n)&&(h=t)})),c.operator===a||c.operator===u||(!h.operator||h.operator===a)&&o(t,h.semver)||h.operator===u&&s(t,h.semver))return!1}return!0};const cn=ln;var hn=(t,e,r)=>cn(t,e,">",r);const pn=ln;var fn=(t,e,r)=>pn(t,e,"<",r);const dn=Ur();var gn=(t,e,r)=>(t=new dn(t,r),e=new dn(e,r),t.intersects(e,r));const vn=Cr,yn=Ye;const wn=Ur(),En=Dr(),{ANY:mn}=En,bn=Cr,_n=Ye,In=[new En(">=0.0.0-0")],Tn=[new En(">=0.0.0")],Sn=(t,e,r)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===mn){if(1===e.length&&e[0].semver===mn)return!0;t=r.includePrerelease?In:Tn}if(1===e.length&&e[0].semver===mn){if(r.includePrerelease)return!0;e=Tn}const n=new Set;let i,o,s;for(const f of t)">"===f.operator||">="===f.operator?i=xn(i,f,r):"<"===f.operator||"<="===f.operator?o=On(o,f,r):n.add(f.semver);if(n.size>1)return null;if(i&&o&&(s=_n(i.semver,o.semver,r),s>0||0===s&&(">="!==i.operator||"<="!==o.operator)))return null;for(const f of n){if(i&&!bn(f,String(i),r)||o&&!bn(f,String(o),r))return null;for(const t of e)if(!bn(f,String(t),r))return!1;return!0}let a,u,l,c,h=!(!o||r.includePrerelease||!o.semver.prerelease.length)&&o.semver,p=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;h&&1===h.prerelease.length&&"<"===o.operator&&0===h.prerelease[0]&&(h=!1);for(const f of e){if(c=c||">"===f.operator||">="===f.operator,l=l||"<"===f.operator||"<="===f.operator,i)if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),">"===f.operator||">="===f.operator){if(a=xn(i,f,r),a===f&&a!==i)return!1}else if(">="===i.operator&&!bn(i.semver,String(f),r))return!1;if(o)if(h&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===h.major&&f.semver.minor===h.minor&&f.semver.patch===h.patch&&(h=!1),"<"===f.operator||"<="===f.operator){if(u=On(o,f,r),u===f&&u!==o)return!1}else if("<="===o.operator&&!bn(o.semver,String(f),r))return!1;if(!f.operator&&(o||i)&&0!==s)return!1}return!(i&&l&&!o&&0!==s||o&&c&&!i&&0!==s||p||h)},xn=(t,e,r)=>{if(!t)return e;const n=_n(t.semver,e.semver,r);return n>0?t:n<0||">"===e.operator&&">="===t.operator?e:t},On=(t,e,r)=>{if(!t)return e;const n=_n(t.semver,e.semver,r);return n<0?t:n>0||"<"===e.operator&&"<="===t.operator?e:t};var Rn=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t===e)return!0;t=new wn(t,r),e=new wn(e,r);let n=!1;t:for(const i of t.set){for(const t of e.set){const e=Sn(i,t,r);if(n=n||null!==e,e)continue t}if(n)return!1}return!0};const An=ve,Nn=fe,Pn=Ne,Ln=_e,Mn=(t,e,r)=>{const n=[];let i=null,o=null;const s=t.sort(((t,e)=>yn(t,e,r)));for(const c of s)vn(c,e,r)?(o=c,i||(i=c)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);const a=[];for(const[c,h]of n)c===h?a.push(c):h||c!==s[0]?h?c===s[0]?a.push(`<=${h}`):a.push(`${c} - ${h}`):a.push(`>=${c}`):a.push("*");const u=a.join(" || "),l="string"==typeof e.raw?e.raw:String(e);return u.length<l.length?u:e};var kn={parse:Le,valid:ke,clean:De,inc:Ce,diff:Be,major:Ve,minor:qe,patch:Xe,prerelease:He,compare:Ye,rcompare:Qe,compareLoose:tr,compareBuild:rr,sort:ir,rsort:sr,gt:ur,lt:cr,eq:pr,neq:dr,gte:vr,lte:wr,cmp:Sr,coerce:kr,Comparator:Dr(),Range:Ur(),satisfies:Cr,toComparators:Br,maxSatisfying:Kr,minSatisfying:Xr,minVersion:Yr,validRange:Qr,outside:ln,gtr:hn,ltr:fn,intersects:gn,simplifyRange:Mn,subset:Rn,SemVer:Pn,re:An.re,src:An.src,tokens:An.t,SEMVER_SPEC_VERSION:Nn.SEMVER_SPEC_VERSION,RELEASE_TYPES:Nn.RELEASE_TYPES,compareIdentifiers:Ln.compareIdentifiers,rcompareIdentifiers:Ln.rcompareIdentifiers};const Un=(0,i.c)(kn);var Dn=i.q,$n=i.s.Buffer,Cn=Kt,Gn=$n.alloc(128),Bn=64;function Fn(t,e){Cn.call(this,"digest"),"string"==typeof e&&(e=$n.from(e)),this._alg=t,this._key=e,e.length>Bn?e=t(e):e.length<Bn&&(e=$n.concat([e,Gn],Bn));for(var r=this._ipad=$n.allocUnsafe(Bn),n=this._opad=$n.allocUnsafe(Bn),i=0;i<Bn;i++)r[i]=54^e[i],n[i]=92^e[i];this._hash=[r]}Dn(Fn,Cn),Fn.prototype._update=function(t){this._hash.push(t)},Fn.prototype._final=function(){var t=this._alg($n.concat(this._hash));return this._alg($n.concat([this._opad,t]))};var Vn=Fn,Kn=b,qn=i.q,jn=Vn,Xn=Kt,Wn=i.s.Buffer,Hn=function(t){return(new Kn).update(t).digest()},zn=i.u,Yn=$t,Zn=Wn.alloc(128);function Qn(t,e){Xn.call(this,"digest"),"string"==typeof e&&(e=Wn.from(e));var r="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>r)?e=("rmd160"===t?new zn:Yn(t)).update(e).digest():e.length<r&&(e=Wn.concat([e,Zn],r));for(var n=this._ipad=Wn.allocUnsafe(r),i=this._opad=Wn.allocUnsafe(r),o=0;o<r;o++)n[o]=54^e[o],i[o]=92^e[o];this._hash="rmd160"===t?new zn:Yn(t),this._hash.update(n)}qn(Qn,Xn),Qn.prototype._update=function(t){this._hash.update(t)},Qn.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new zn:Yn(this._alg)).update(this._opad).update(t).digest()};const Jn=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new Qn("rmd160",e):"md5"===t?new jn(Hn,e):new Qn(t,e)},ti=l.alloc(1,1),ei=l.alloc(1,0);var ri=function(t,e,r,n,i){let o=l.alloc(32,0),s=l.alloc(32,1);o=Jn("sha256",o).update(s).update(ei).update(e).update(t).update(i||"").digest(),s=Jn("sha256",o).update(s).digest(),o=Jn("sha256",o).update(s).update(ti).update(e).update(t).update(i||"").digest(),s=Jn("sha256",o).update(s).digest(),s=Jn("sha256",o).update(s).digest();let a=s;for(;!n(a)||!r(a);)o=Jn("sha256",o).update(s).update(ei).digest(),s=Jn("sha256",o).update(s).digest(),s=Jn("sha256",o).update(s).digest(),a=s;return a};const ni=i.Y,ii=new(0,i.Z.ec)("secp256k1"),oi=ri,si=l.alloc(32,0),ai=l.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),ui=l.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex"),li=ii.curve.n,ci=li.shrn(1),hi=ii.curve.g,pi="Expected Private",fi="Expected Point",di="Expected Tweak",gi="Expected Hash",vi="Expected Extra Data (32 bytes)";function yi(t){return l.isBuffer(t)&&32===t.length}function wi(t){return!!yi(t)&&t.compare(ai)<0}function Ei(t){if(!l.isBuffer(t)||t.length<33)return!1;const e=t[0],r=t.slice(1,33);if(0===r.compare(si)||r.compare(ui)>=0)return!1;if((2===e||3===e)&&33===t.length){try{Si(t)}catch{return!1}return!0}const n=t.slice(33);return!(0===n.compare(si)||n.compare(ui)>=0)&&(4===e&&65===t.length)}function mi(t){return 4!==t[0]}function bi(t){return!!yi(t)&&(t.compare(si)>0&&t.compare(ai)<0)}function _i(t,e){return void 0===t&&void 0!==e?mi(e):void 0===t||t}function Ii(t){return new ni(t)}function Ti(t){return t.toArrayLike(l,"be",32)}function Si(t){return ii.curve.decodePoint(t)}function xi(t,e){return l.from(t._encode(e))}function Oi(t,e,r){if(!yi(t))throw new TypeError(gi);if(!bi(e))throw new TypeError(pi);if(void 0!==r&&!yi(r))throw new TypeError(vi);const n=Ii(e),i=Ii(t);let o,s;oi(t,e,(function(t){const e=Ii(t),r=hi.mul(e);return!(r.isInfinity()||(o=r.x.umod(li),0===o.isZero())||(s=e.invm(li).mul(i.add(n.mul(o))).umod(li),0===s.isZero()))}),bi,r),s.cmp(ci)>0&&(s=li.sub(s));const a=l.allocUnsafe(64);return Ti(o).copy(a,0),Ti(s).copy(a,32),a}var Ri={isPoint:Ei,isPointCompressed:function(t){return!!Ei(t)&&mi(t)},isPrivate:bi,pointAdd:function(t,e,r){if(!Ei(t))throw new TypeError(fi);if(!Ei(e))throw new TypeError(fi);const n=Si(t),i=Si(e),o=n.add(i);return o.isInfinity()?null:xi(o,_i(r,t))},pointAddScalar:function(t,e,r){if(!Ei(t))throw new TypeError(fi);if(!wi(e))throw new TypeError(di);const n=_i(r,t),i=Si(t);if(0===e.compare(si))return xi(i,n);const o=Ii(e),s=hi.mul(o),a=i.add(s);return a.isInfinity()?null:xi(a,n)},pointCompress:function(t,e){if(!Ei(t))throw new TypeError(fi);const r=Si(t);if(r.isInfinity())throw new TypeError(fi);return xi(r,_i(e,t))},pointFromScalar:function(t,e){if(!bi(t))throw new TypeError(pi);const r=Ii(t),n=hi.mul(r);return n.isInfinity()?null:xi(n,_i(e))},pointMultiply:function(t,e,r){if(!Ei(t))throw new TypeError(fi);if(!wi(e))throw new TypeError(di);const n=_i(r,t),i=Si(t),o=Ii(e),s=i.mul(o);return s.isInfinity()?null:xi(s,n)},privateAdd:function(t,e){if(!bi(t))throw new TypeError(pi);if(!wi(e))throw new TypeError(di);const r=Ii(t),n=Ii(e),i=Ti(r.add(n).umod(li));return bi(i)?i:null},privateSub:function(t,e){if(!bi(t))throw new TypeError(pi);if(!wi(e))throw new TypeError(di);const r=Ii(t),n=Ii(e),i=Ti(r.sub(n).umod(li));return bi(i)?i:null},sign:function(t,e){return Oi(t,e)},signWithEntropy:function(t,e,r){return Oi(t,e,r)},verify:function(t,e,r,n){if(!yi(t))throw new TypeError(gi);if(!Ei(e))throw new TypeError(fi);if(!function(t){const e=t.slice(0,32),r=t.slice(32,64);return l.isBuffer(t)&&64===t.length&&e.compare(ai)<0&&r.compare(ai)<0}(r))throw new TypeError("Expected Signature");const i=Si(e),o=Ii(r.slice(0,32)),s=Ii(r.slice(32,64));if(n&&s.cmp(ci)>0||o.gtn(0)<=0||s.gtn(0)<=0)return!1;const a=Ii(t),u=s.invm(li),c=a.mul(u).umod(li),h=o.mul(u).umod(li),p=hi.mulAdd(c,i,h);return!p.isInfinity()&&p.x.umod(li).eq(o)}},Ai=i.s.Buffer,Ni=9007199254740991;function Pi(t){if(t<0||t>Ni||t%1!==0)throw new RangeError("value out of range")}function Li(t){return Pi(t),t<253?1:t<=65535?3:t<=4294967295?5:9}var Mi={encode:function t(e,r,n){if(Pi(e),r||(r=Ai.allocUnsafe(Li(e))),!Ai.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return n||(n=0),e<253?(r.writeUInt8(e,n),t.bytes=1):e<=65535?(r.writeUInt8(253,n),r.writeUInt16LE(e,n+1),t.bytes=3):e<=4294967295?(r.writeUInt8(254,n),r.writeUInt32LE(e,n+1),t.bytes=5):(r.writeUInt8(255,n),r.writeUInt32LE(e>>>0,n+1),r.writeUInt32LE(e/4294967296|0,n+5),t.bytes=9),r},decode:function t(e,r){if(!Ai.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var n=e.readUInt8(r);if(n<253)return t.bytes=1,n;if(253===n)return t.bytes=3,e.readUInt16LE(r+1);if(254===n)return t.bytes=5,e.readUInt32LE(r+1);t.bytes=9;var i=e.readUInt32LE(r+1),o=4294967296*e.readUInt32LE(r+5)+i;return Pi(o),o},encodingLength:Li};const ki=(0,i.c)(Mi);function Ui(t){if(t>Number.MAX_SAFE_INTEGER)throw new Error("Can't convert numbers > MAX_SAFE_INT");for(var e=l.alloc(8,0),r=0;r<e.length;r++){var n=255&t;e[r]=n,t=(t-n)/256}return e}function Di(t){var e=0;if(8!=t.length)throw new Error("Expected Bufffer of lenght 8");if(0!=t[7])throw new Error("Can't encode numbers > MAX_SAFE_INT");if(t[6]>31)throw new Error("Can't encode numbers > MAX_SAFE_INT");for(var r=t.length-1;r>=0;r--)e=256*e+t[r];return e}var $i=function(){function t(){this.bufs=[]}return t.prototype.write=function(t,e){var r=l.alloc(t);e(r),this.bufs.push(r)},t.prototype.writeUInt8=function(t){this.write(1,(function(e){return e.writeUInt8(t,0)}))},t.prototype.writeInt32=function(t){this.write(4,(function(e){return e.writeInt32LE(t,0)}))},t.prototype.writeUInt32=function(t){this.write(4,(function(e){return e.writeUInt32LE(t,0)}))},t.prototype.writeUInt64=function(t){var e=Ui(t);this.writeSlice(e)},t.prototype.writeVarInt=function(t){this.bufs.push(ki.encode(t))},t.prototype.writeSlice=function(t){this.bufs.push(l.from(t))},t.prototype.writeVarSlice=function(t){this.writeVarInt(t.length),this.writeSlice(t)},t.prototype.buffer=function(){return l.concat(this.bufs)},t}(),Ci=function(){function t(t,e){void 0===e&&(e=0),this.buffer=t,this.offset=e}return t.prototype.available=function(){return this.buffer.length-this.offset},t.prototype.readUInt8=function(){var t=this.buffer.readUInt8(this.offset);return this.offset++,t},t.prototype.readInt32=function(){var t=this.buffer.readInt32LE(this.offset);return this.offset+=4,t},t.prototype.readUInt32=function(){var t=this.buffer.readUInt32LE(this.offset);return this.offset+=4,t},t.prototype.readUInt64=function(){return Di(this.readSlice(8))},t.prototype.readVarInt=function(){var t=ki.decode(this.buffer,this.offset);return this.offset+=ki.decode.bytes,t},t.prototype.readSlice=function(t){if(this.buffer.length<this.offset+t)throw new Error("Cannot read slice out of bounds");var e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e},t.prototype.readVarSlice=function(){return this.readSlice(this.readVarInt())},t.prototype.readVector=function(){for(var t=this.readVarInt(),e=[],r=0;r<t;r++)e.push(this.readVarSlice());return e},t}(),Gi=50,Bi=4294967295;function Fi(t){return(new i.v).update(Ct("sha256").update(t).digest()).digest()}var Vi=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.spendingCondition=function(t){if(1!=t.length)throw new Error("Expected single key, got "+t.length);return this.singleKeyCondition(t[0])},e.prototype.setInput=function(t,e,r,n,i){if(1!=n.length)throw new Error("Expected single key, got "+n.length);if(1!=i.length)throw new Error("Expected single path, got "+i.length);this.setSingleKeyInput(t,e,r,n[0],i[0])},e.prototype.setOwnOutput=function(t,e,r,n){if(1!=r.length)throw new Error("Expected single key, got "+r.length);if(1!=n.length)throw new Error("Expected single path, got "+n.length);this.setSingleKeyOutput(t,e,r[0],n[0])},e}((function(t,e){this.psbt=t,this.masterFp=e})),qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.singleKeyCondition=function(t){var e=new $i,r=Fi(t);return e.writeSlice(l.from([118,169,20])),e.writeSlice(r),e.writeSlice(l.from([136,172])),{scriptPubKey:e.buffer()}},e.prototype.setSingleKeyInput=function(t,e,r,n,i){if(!e)throw new Error("Full input base transaction required");this.psbt.setInputNonWitnessUtxo(t,e),this.psbt.setInputBip32Derivation(t,n,this.masterFp,i)},e.prototype.setSingleKeyOutput=function(t,e,r,n){this.psbt.setOutputBip32Derivation(t,r,this.masterFp,n)},e.prototype.getDescriptorTemplate=function(){return"pkh(@0)"},e}(Ki),ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.singleKeyCondition=function(t){var e=t.slice(1),r=new $i,n=this.getTaprootOutputKey(e);return r.writeSlice(l.from([81,32])),r.writeSlice(n),{scriptPubKey:r.buffer()}},e.prototype.setSingleKeyInput=function(t,e,r,n,i){var o=n.slice(1);this.psbt.setInputTapBip32Derivation(t,o,[],this.masterFp,i),this.psbt.setInputWitnessUtxo(t,r.amount,r.cond.scriptPubKey)},e.prototype.setSingleKeyOutput=function(t,e,r,n){var i=r.slice(1);this.psbt.setOutputTapBip32Derivation(t,i,[],this.masterFp,n)},e.prototype.getDescriptorTemplate=function(){return"tr(@0)"},e.prototype.hashTapTweak=function(t){var e=i.p.sha256(l.from("TapTweak","utf-8"));return i.p.sha256(l.concat([e,e,t]))},e.prototype.getTaprootOutputKey=function(t){if(32!=t.length)throw new Error("Expected 32 byte pubkey. Got "+t.length);var e=l.concat([l.from([2]),t]),r=this.hashTapTweak(t);return l.from(Ri.pointAddScalar(e,r)).slice(1)},e}(Ki),Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.singleKeyCondition=function(t){var e=new $i,r=this.createRedeemScript(t),n=Fi(r);return e.writeSlice(l.from([169,20])),e.writeSlice(n),e.writeUInt8(135),{scriptPubKey:e.buffer(),redeemScript:r}},e.prototype.setSingleKeyInput=function(t,e,r,n,i){if(!e)throw new Error("Full input base transaction required");this.psbt.setInputNonWitnessUtxo(t,e),this.psbt.setInputBip32Derivation(t,n,this.masterFp,i);var o=r.cond.redeemScript,s=this.createRedeemScript(n);if(o&&!s.equals(o))throw new Error("User-supplied redeemScript ".concat(o.toString("hex")," doesn't\n       match expected ").concat(s.toString("hex")," for input ").concat(t));this.psbt.setInputRedeemScript(t,s),this.psbt.setInputWitnessUtxo(t,r.amount,r.cond.scriptPubKey)},e.prototype.setSingleKeyOutput=function(t,e,r,n){this.psbt.setOutputRedeemScript(t,e.redeemScript),this.psbt.setOutputBip32Derivation(t,r,this.masterFp,n)},e.prototype.getDescriptorTemplate=function(){return"sh(wpkh(@0))"},e.prototype.createRedeemScript=function(t){var e=Fi(t);return l.concat([l.from("0014","hex"),e])},e}(Ki),Wi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.singleKeyCondition=function(t){var e=new $i,r=Fi(t);return e.writeSlice(l.from([0,20])),e.writeSlice(r),{scriptPubKey:e.buffer()}},e.prototype.setSingleKeyInput=function(t,e,r,n,i){if(!e)throw new Error("Full input base transaction required");this.psbt.setInputNonWitnessUtxo(t,e),this.psbt.setInputBip32Derivation(t,n,this.masterFp,i),this.psbt.setInputWitnessUtxo(t,r.amount,r.cond.scriptPubKey)},e.prototype.setSingleKeyOutput=function(t,e,r,n){this.psbt.setOutputBip32Derivation(t,r,this.masterFp,n)},e.prototype.getDescriptorTemplate=function(){return"wpkh(@0)"},e}(Ki),Hi=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},zi=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},Yi=function(){function t(t,e){void 0===e&&(e=i.p.sha256),this.leaves=t,this.h=e;var r=this.calculateRoot(t);this.rootNode=r.root,this.leafNodes=r.leaves}return t.prototype.getRoot=function(){return this.rootNode.hash},t.prototype.size=function(){return this.leaves.length},t.prototype.getLeaves=function(){return this.leaves},t.prototype.getLeafHash=function(t){return this.leafNodes[t].hash},t.prototype.getProof=function(t){if(t>=this.leaves.length)throw Error("Index out of bounds");return Ji(this.leafNodes[t])},t.prototype.calculateRoot=function(t){var e=t.length;if(0==e)return{root:new Qi(void 0,void 0,l.alloc(32,0)),leaves:[]};if(1==e){var r=new Qi(void 0,void 0,t[0]);return{root:r,leaves:[r]}}var n=function(t){if(t<2)throw Error("Expected n >= 2");return function(t){return 0==(t&t-1)}(t)?t/2:1<<Math.floor(Math.log2(t))}(e),i=this.calculateRoot(t.slice(0,n)),o=this.calculateRoot(t.slice(n)),s=i.root,a=o.root,u=this.hashNode(s.hash,a.hash),c=new Qi(s,a,u);return s.parent=c,a.parent=c,{root:c,leaves:i.leaves.concat(o.leaves)}},t.prototype.hashNode=function(t,e){return this.h(l.concat([l.from([1]),t,e]))},t}();function Zi(t,e){return void 0===e&&(e=i.p.sha256),function(t,e,r){return r(l.concat([t,e]))}(l.from([0]),t,e)}var Qi=function(){function t(t,e,r){this.leftChild=t,this.rightChild=e,this.hash=r}return t.prototype.isLeaf=function(){return null==this.leftChild},t}();function Ji(t){if(!t.parent)return[];if(t.parent.leftChild==t){if(!t.parent.rightChild)throw new Error("Expected right child to exist");return zi([t.parent.rightChild.hash],Hi(Ji(t.parent)),!1)}if(!t.parent.leftChild)throw new Error("Expected left child to exist");return zi([t.parent.leftChild.hash],Hi(Ji(t.parent)),!1)}var to=function(){function t(t,e){this.descriptorTemplate=t,this.keys=[e]}return t.prototype.getWalletId=function(){return i.p.sha256(this.serialize())},t.prototype.serialize=function(){var t=this.keys.map((function(t){return l.from(t,"ascii")})),e=new Yi(t.map((function(t){return Zi(t)}))),r=new $i;return r.writeUInt8(1),r.writeUInt8(0),r.writeVarSlice(l.from(this.descriptorTemplate,"ascii")),r.writeVarInt(this.keys.length),r.writeSlice(e.getRoot()),r.buffer()},t}();function eo(t,e,r){var n=ue(e);return"[".concat(t.toString("hex")).concat(n.substring(1),"]").concat(r,"/**")}var ro,no,io,oo,so=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ao=globalThis&&globalThis.__assign||function(){return ao=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ao.apply(this,arguments)};(no=ro||(ro={}))[no.TX_VERSION=2]="TX_VERSION",no[no.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",no[no.INPUT_COUNT=4]="INPUT_COUNT",no[no.OUTPUT_COUNT=5]="OUTPUT_COUNT",no[no.TX_MODIFIABLE=6]="TX_MODIFIABLE",no[no.VERSION=251]="VERSION",function(t){t[t.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",t[t.WITNESS_UTXO=1]="WITNESS_UTXO",t[t.PARTIAL_SIG=2]="PARTIAL_SIG",t[t.SIGHASH_TYPE=3]="SIGHASH_TYPE",t[t.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",t[t.BIP32_DERIVATION=6]="BIP32_DERIVATION",t[t.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",t[t.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",t[t.PREVIOUS_TXID=14]="PREVIOUS_TXID",t[t.OUTPUT_INDEX=15]="OUTPUT_INDEX",t[t.SEQUENCE=16]="SEQUENCE",t[t.TAP_KEY_SIG=19]="TAP_KEY_SIG",t[t.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION"}(io||(io={})),function(t){t[t.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",t[t.BIP_32_DERIVATION=2]="BIP_32_DERIVATION",t[t.AMOUNT=3]="AMOUNT",t[t.SCRIPT=4]="SCRIPT",t[t.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION"}(oo||(oo={}));var uo=l.from([112,115,98,116,255]),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return so(e,t),e}(Error),co=function(){function t(){this.globalMap=new Map,this.inputMaps=[],this.outputMaps=[]}return t.prototype.setGlobalTxVersion=function(t){this.setGlobal(ro.TX_VERSION,Eo(t))},t.prototype.getGlobalTxVersion=function(){return this.getGlobal(ro.TX_VERSION).readUInt32LE(0)},t.prototype.setGlobalFallbackLocktime=function(t){this.setGlobal(ro.FALLBACK_LOCKTIME,Eo(t))},t.prototype.getGlobalFallbackLocktime=function(){var t;return null===(t=this.getGlobalOptional(ro.FALLBACK_LOCKTIME))||void 0===t?void 0:t.readUInt32LE(0)},t.prototype.setGlobalInputCount=function(t){this.setGlobal(ro.INPUT_COUNT,mo(t))},t.prototype.getGlobalInputCount=function(){return bo(this.getGlobal(ro.INPUT_COUNT))},t.prototype.setGlobalOutputCount=function(t){this.setGlobal(ro.OUTPUT_COUNT,mo(t))},t.prototype.getGlobalOutputCount=function(){return bo(this.getGlobal(ro.OUTPUT_COUNT))},t.prototype.setGlobalTxModifiable=function(t){this.setGlobal(ro.TX_MODIFIABLE,t)},t.prototype.getGlobalTxModifiable=function(){return this.getGlobalOptional(ro.TX_MODIFIABLE)},t.prototype.setGlobalPsbtVersion=function(t){this.setGlobal(ro.VERSION,Eo(t))},t.prototype.getGlobalPsbtVersion=function(){return this.getGlobal(ro.VERSION).readUInt32LE(0)},t.prototype.setInputNonWitnessUtxo=function(t,e){this.setInput(t,io.NON_WITNESS_UTXO,yo(),e)},t.prototype.getInputNonWitnessUtxo=function(t){return this.getInputOptional(t,io.NON_WITNESS_UTXO,yo())},t.prototype.setInputWitnessUtxo=function(t,e,r){var n=new $i;n.writeSlice(e),n.writeVarSlice(r),this.setInput(t,io.WITNESS_UTXO,yo(),n.buffer())},t.prototype.getInputWitnessUtxo=function(t){var e=this.getInputOptional(t,io.WITNESS_UTXO,yo());if(e){var r=new Ci(e);return{amount:r.readSlice(8),scriptPubKey:r.readVarSlice()}}},t.prototype.setInputPartialSig=function(t,e,r){this.setInput(t,io.PARTIAL_SIG,e,r)},t.prototype.getInputPartialSig=function(t,e){return this.getInputOptional(t,io.PARTIAL_SIG,e)},t.prototype.setInputSighashType=function(t,e){this.setInput(t,io.SIGHASH_TYPE,yo(),Eo(e))},t.prototype.getInputSighashType=function(t){var e=this.getInputOptional(t,io.SIGHASH_TYPE,yo());if(e)return e.readUInt32LE(0)},t.prototype.setInputRedeemScript=function(t,e){this.setInput(t,io.REDEEM_SCRIPT,yo(),e)},t.prototype.getInputRedeemScript=function(t){return this.getInputOptional(t,io.REDEEM_SCRIPT,yo())},t.prototype.setInputBip32Derivation=function(t,e,r,n){if(33!=e.length)throw new Error("Invalid pubkey length: "+e.length);this.setInput(t,io.BIP32_DERIVATION,e,this.encodeBip32Derivation(r,n))},t.prototype.getInputBip32Derivation=function(t,e){var r=this.getInputOptional(t,io.BIP32_DERIVATION,e);if(r)return this.decodeBip32Derivation(r)},t.prototype.setInputFinalScriptsig=function(t,e){this.setInput(t,io.FINAL_SCRIPTSIG,yo(),e)},t.prototype.getInputFinalScriptsig=function(t){return this.getInputOptional(t,io.FINAL_SCRIPTSIG,yo())},t.prototype.setInputFinalScriptwitness=function(t,e){this.setInput(t,io.FINAL_SCRIPTWITNESS,yo(),e)},t.prototype.getInputFinalScriptwitness=function(t){return this.getInput(t,io.FINAL_SCRIPTWITNESS,yo())},t.prototype.setInputPreviousTxId=function(t,e){this.setInput(t,io.PREVIOUS_TXID,yo(),e)},t.prototype.getInputPreviousTxid=function(t){return this.getInput(t,io.PREVIOUS_TXID,yo())},t.prototype.setInputOutputIndex=function(t,e){this.setInput(t,io.OUTPUT_INDEX,yo(),Eo(e))},t.prototype.getInputOutputIndex=function(t){return this.getInput(t,io.OUTPUT_INDEX,yo()).readUInt32LE(0)},t.prototype.setInputSequence=function(t,e){this.setInput(t,io.SEQUENCE,yo(),Eo(e))},t.prototype.getInputSequence=function(t){var e,r;return null!==(r=null===(e=this.getInputOptional(t,io.SEQUENCE,yo()))||void 0===e?void 0:e.readUInt32LE(0))&&void 0!==r?r:4294967295},t.prototype.setInputTapKeySig=function(t,e){this.setInput(t,io.TAP_KEY_SIG,yo(),e)},t.prototype.getInputTapKeySig=function(t){return this.getInputOptional(t,io.TAP_KEY_SIG,yo())},t.prototype.setInputTapBip32Derivation=function(t,e,r,n,i){if(32!=e.length)throw new Error("Invalid pubkey length: "+e.length);var o=this.encodeTapBip32Derivation(r,n,i);this.setInput(t,io.TAP_BIP32_DERIVATION,e,o)},t.prototype.getInputTapBip32Derivation=function(t,e){var r=this.getInput(t,io.TAP_BIP32_DERIVATION,e);return this.decodeTapBip32Derivation(r)},t.prototype.getInputKeyDatas=function(t,e){return this.getKeyDatas(this.inputMaps[t],e)},t.prototype.setOutputRedeemScript=function(t,e){this.setOutput(t,oo.REDEEM_SCRIPT,yo(),e)},t.prototype.getOutputRedeemScript=function(t){return this.getOutput(t,oo.REDEEM_SCRIPT,yo())},t.prototype.setOutputBip32Derivation=function(t,e,r,n){this.setOutput(t,oo.BIP_32_DERIVATION,e,this.encodeBip32Derivation(r,n))},t.prototype.getOutputBip32Derivation=function(t,e){var r=this.getOutput(t,oo.BIP_32_DERIVATION,e);return this.decodeBip32Derivation(r)},t.prototype.setOutputAmount=function(t,e){this.setOutput(t,oo.AMOUNT,yo(),function(t){return Ui(t)}(e))},t.prototype.getOutputAmount=function(t){return Di(this.getOutput(t,oo.AMOUNT,yo()))},t.prototype.setOutputScript=function(t,e){this.setOutput(t,oo.SCRIPT,yo(),e)},t.prototype.getOutputScript=function(t){return this.getOutput(t,oo.SCRIPT,yo())},t.prototype.setOutputTapBip32Derivation=function(t,e,r,n,i){var o=this.encodeTapBip32Derivation(r,n,i);this.setOutput(t,oo.TAP_BIP32_DERIVATION,e,o)},t.prototype.getOutputTapBip32Derivation=function(t,e){var r=this.getOutput(t,oo.TAP_BIP32_DERIVATION,e);return this.decodeTapBip32Derivation(r)},t.prototype.deleteInputEntries=function(t,e){var r=this;this.inputMaps[t].forEach((function(t,n,i){r.isKeyType(n,e)&&i.delete(n)}))},t.prototype.copy=function(t){this.copyMap(this.globalMap,t.globalMap),this.copyMaps(this.inputMaps,t.inputMaps),this.copyMaps(this.outputMaps,t.outputMaps)},t.prototype.copyMaps=function(t,e){var r=this;t.forEach((function(t,n){var i=new Map;r.copyMap(t,i),e[n]=i}))},t.prototype.copyMap=function(t,e){t.forEach((function(t,r){return e.set(r,l.from(t))}))},t.prototype.serialize=function(){var t=new $i;return t.writeSlice(l.from([112,115,98,116,255])),vo(t,this.globalMap),this.inputMaps.forEach((function(e){vo(t,e)})),this.outputMaps.forEach((function(e){vo(t,e)})),t.buffer()},t.prototype.deserialize=function(t){var e=new Ci(t);if(!e.readSlice(5).equals(uo))throw new Error("Invalid magic bytes");for(;this.readKeyPair(this.globalMap,e););for(var r=0;r<this.getGlobalInputCount();r++)for(this.inputMaps[r]=new Map;this.readKeyPair(this.inputMaps[r],e););for(r=0;r<this.getGlobalOutputCount();r++)for(this.outputMaps[r]=new Map;this.readKeyPair(this.outputMaps[r],e););},t.prototype.readKeyPair=function(t,e){var r=e.readVarInt();return 0!=r&&(wo(t,e.readUInt8(),e.readSlice(r-1),e.readVarSlice()),!0)},t.prototype.getKeyDatas=function(t,e){var r=this,n=[];return t.forEach((function(t,i){r.isKeyType(i,[e])&&n.push(l.from(i.substring(2),"hex"))})),n},t.prototype.isKeyType=function(t,e){var r=l.from(t.substring(0,2),"hex").readUInt8(0);return e.some((function(t){return t==r}))},t.prototype.setGlobal=function(t,e){var r=new po(t,l.from([]));this.globalMap.set(r.toString(),e)},t.prototype.getGlobal=function(t){return ho(this.globalMap,t,yo(),!1)},t.prototype.getGlobalOptional=function(t){return ho(this.globalMap,t,yo(),!0)},t.prototype.setInput=function(t,e,r,n){wo(this.getMap(t,this.inputMaps),e,r,n)},t.prototype.getInput=function(t,e,r){return ho(this.inputMaps[t],e,r,!1)},t.prototype.getInputOptional=function(t,e,r){return ho(this.inputMaps[t],e,r,!0)},t.prototype.setOutput=function(t,e,r,n){wo(this.getMap(t,this.outputMaps),e,r,n)},t.prototype.getOutput=function(t,e,r){return ho(this.outputMaps[t],e,r,!1)},t.prototype.getMap=function(t,e){return e[t]?e[t]:e[t]=new Map},t.prototype.encodeBip32Derivation=function(t,e){var r=new $i;return this.writeBip32Derivation(r,t,e),r.buffer()},t.prototype.decodeBip32Derivation=function(t){var e=new Ci(t);return this.readBip32Derivation(e)},t.prototype.writeBip32Derivation=function(t,e,r){t.writeSlice(e),r.forEach((function(e){t.writeUInt32(e)}))},t.prototype.readBip32Derivation=function(t){for(var e=t.readSlice(4),r=[];t.offset<t.buffer.length;)r.push(t.readUInt32());return{masterFingerprint:e,path:r}},t.prototype.encodeTapBip32Derivation=function(t,e,r){var n=new $i;return n.writeVarInt(t.length),t.forEach((function(t){n.writeSlice(t)})),this.writeBip32Derivation(n,e,r),n.buffer()},t.prototype.decodeTapBip32Derivation=function(t){for(var e=new Ci(t),r=e.readVarInt(),n=[],i=0;i<r;i++)n.push(e.readSlice(32));var o=this.readBip32Derivation(e);return ao({hashes:n},o)},t}();function ho(t,e,r,n){if(!t)throw Error("No such map");var i=new po(e,r),o=t.get(i.toString());if(!o){if(n)return;throw new lo(i.toString())}return l.from(o)}var po=function(){function t(t,e){this.keyType=t,this.keyData=e}return t.prototype.toString=function(){var t=new $i;return this.toBuffer(t),t.buffer().toString("hex")},t.prototype.serialize=function(t){t.writeVarInt(1+this.keyData.length),this.toBuffer(t)},t.prototype.toBuffer=function(t){t.writeUInt8(this.keyType),t.writeSlice(this.keyData)},t}(),fo=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.serialize=function(t){this.key.serialize(t),t.writeVarSlice(this.value)},t}();function go(t){return new po(t.readUInt8(0),t.slice(1))}function vo(t,e){for(var r in e.keys){var n=e.get(r);new fo(go(l.from(r,"hex")),n).serialize(t)}t.writeUInt8(0)}function yo(){return l.from([])}function wo(t,e,r,n){var i=new po(e,r);t.set(i.toString(),n)}function Eo(t){var e=l.alloc(4);return e.writeUInt32LE(t,0),e}function mo(t){var e=new $i;return e.writeVarInt(t),e.buffer()}function bo(t){return new Ci(t).readVarInt()}function _o(t,e){var r=[io.BIP32_DERIVATION,io.PARTIAL_SIG,io.TAP_BIP32_DERIVATION,io.TAP_KEY_SIG],n=!!t.getInputWitnessUtxo(e),i=!!t.getInputNonWitnessUtxo(e);n&&i&&r.push(io.NON_WITNESS_UTXO),t.deleteInputEntries(e,r)}function Io(t,e){if(e.length<=75)t.writeUInt8(e.length);else if(e.length<=256)t.writeUInt8(76),t.writeUInt8(e.length);else if(e.length<=65536){t.writeUInt8(77);var r=l.alloc(2);r.writeUInt16LE(e.length,0),t.writeSlice(r)}t.writeSlice(e)}function To(t,e){if(t[e]<253)return[t[e],1];if(253===t[e])return[(t[e+2]<<8)+t[e+1],3];if(254===t[e])return[(t[e+4]<<24)+(t[e+3]<<16)+(t[e+2]<<8)+t[e+1],5];throw new Error("getVarint called with unexpected parameters")}function So(t){if(t<253){var e=l.alloc(1);return e[0]=t,e}if(t<=65535){var r=l.alloc(3);return r[0]=253,r[1]=255&t,r[2]=t>>8&255,r}var n=l.alloc(5);return n[0]=254,n[1]=255&t,n[2]=t>>8&255,n[3]=t>>16&255,n[4]=t>>24&255,n}function xo(t){var e=t.outputs,r=l.alloc(0);return typeof e<"u"&&(r=l.concat([r,So(e.length)]),e.forEach((function(t){r=l.concat([r,t.amount,So(t.script.length),t.script])}))),r}function Oo(t,e,r,n){void 0===n&&(n=[]);var i=n.includes("decred"),o=n.includes("zcash"),s=n.includes("bech32"),a=l.alloc(0),u=typeof t.witness<"u"&&!e;t.inputs.forEach((function(t){a=i||s?l.concat([a,t.prevout,l.from([0]),t.sequence]):l.concat([a,t.prevout,So(t.script.length),t.script,t.sequence])}));var c=xo(t);return typeof t.outputs<"u"&&typeof t.locktime<"u"&&(c=l.concat([c,u&&t.witness||l.alloc(0),t.locktime,t.nExpiryHeight||l.alloc(0),t.extraData||l.alloc(0)])),o?l.concat([t.version,t.nVersionGroupId||l.alloc(0),l.from([180,208,214,194]),t.locktime||l.from([0,0,0,0]),t.nExpiryHeight||l.from([0,0,0,0]),u?l.from("0001","hex"):l.alloc(0),So(t.inputs.length),a,c]):l.concat([t.version,r||l.alloc(0),t.nVersionGroupId||l.alloc(0),u?l.from("0001","hex"):l.alloc(0),So(t.inputs.length),a,c])}var Ro=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Ao=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},No=["Bitcoin","Bitcoin Test"];var Po=function(){function t(t){this.client=t}return t.prototype.getWalletXpub=function(t){var e=t.path,r=t.xpubVersion;return Ro(this,void 0,void 0,(function(){var t,n,i;return Ao(this,(function(o){switch(o.label){case 0:return t=le(e),[4,this.client.getExtendedPubkey(!1,t)];case 1:if(n=o.sent(),(i=he(n)).version!=r)throw new Error("Expected xpub version ".concat(r," doesn't match the xpub version from the device ").concat(i.version));return[2,n]}}))}))},t.prototype.getWalletPublicKey=function(t,e){var r,n;return Ro(this,void 0,void 0,(function(){var i,o,s,a,u;return Ao(this,(function(c){switch(c.label){case 0:return i=le(t),[4,this.client.getExtendedPubkey(!1,i)];case 1:return o=c.sent(),s=null!==(r=null==e?void 0:e.verify)&&void 0!==r&&r,[4,this.getWalletAddress(i,Lo(null!==(n=null==e?void 0:e.format)&&void 0!==n?n:"legacy"),s)];case 2:return a=c.sent(),u=he(o),[2,{publicKey:l.from(Ri.pointCompress(u.pubkey,!1)).toString("hex"),bitcoinAddress:a,chainCode:u.chaincode.toString("hex")}]}}))}))},t.prototype.getWalletAddress=function(t,e,r){return Ro(this,void 0,void 0,(function(){var n,i,o,s,a;return Ao(this,(function(u){switch(u.label){case 0:return n=function(t){for(var e=t.length-1;e>=0;e--)if(t[e]>=2147483648)return t.slice(0,e+1);return[]}(t),n.length+2!=t.length?[2,""]:[4,this.client.getExtendedPubkey(!1,n)];case 1:return i=u.sent(),[4,this.client.getMasterFingerprint()];case 2:return o=u.sent(),s=new to(e,eo(o,n,i)),a=t.slice(-2,t.length),[2,this.client.getWalletAddress(s,l.alloc(32,0),a[0],a[1],r)]}}))}))},t.prototype.createPaymentTransactionNew=function(t){return Ro(this,void 0,void 0,(function(){var e,r,n,i,o,s,a,u,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T,S;return Ao(this,(function(x){switch(x.label){case 0:if(0==(e=t.inputs.length))throw Error("No inputs");return r=new co,[4,this.client.getMasterFingerprint()];case 1:n=x.sent(),i=function(t,e,r){return t.additionals.includes("bech32m")?new ji(e,r):t.additionals.includes("bech32")?new Wi(e,r):t.segwit?new Xi(e,r):new qi(e,r)}(t,r,n),null!=t.lockTime&&r.setGlobalFallbackLocktime(t.lockTime),r.setGlobalInputCount(e),r.setGlobalPsbtVersion(2),r.setGlobalTxVersion(2),o=0,s=function(){t.onDeviceStreaming&&t.onDeviceStreaming({total:2*e,index:o,progress:++o/(2*e)})},a="",u=[],v=0,x.label=2;case 2:return v<e?(s(),c=le(t.associatedKeysets[v]),""!=a?[3,4]:(u=c.slice(0,-2),[4,this.client.getExtendedPubkey(!1,u)])):[3,7];case 3:a=x.sent(),x.label=4;case 4:return[4,this.setInput(r,v,t.inputs[v],c,i,n,t.sigHashType)];case 5:x.sent(),x.label=6;case 6:return v++,[3,2];case 7:return h=l.from(t.outputScriptHex,"hex"),p=new Ci(h),f=p.readVarInt(),r.setGlobalOutputCount(f),[4,this.outputScriptAt(u,i,t.changePath)];case 8:for(d=x.sent(),g=!d,v=0;v<f;v++)y=Number(p.readUInt64()),w=p.readVarSlice(),r.setOutputAmount(v,y),r.setOutputScript(v,w),d&&w.equals(null==d?void 0:d.cond.scriptPubKey)&&(g=!0,E=le(t.changePath),m=d.pubkey,i.setOwnOutput(v,d.cond,[m],[E]));if(!g)throw new Error("Change script not found among outputs! "+(null==d?void 0:d.cond.scriptPubKey.toString("hex")));return b=eo(n,u,a),_=new to(i.getDescriptorTemplate(),b),t.onDeviceSignatureRequested&&t.onDeviceSignatureRequested(),I=!1,T=function(){I||(I=!0,t.onDeviceSignatureGranted&&t.onDeviceSignatureGranted()),s()},[4,this.signPsbt(r,_,T)];case 9:return x.sent(),function(t){for(var e=t.getGlobalInputCount(),r=0;r<e;r++){var n=t.getInputKeyDatas(r,io.PARTIAL_SIG),i=t.getInputTapKeySig(r);if(0==n.length&&!i)throw Error("No signature for input ".concat(r," present"));if(n.length>0){if(n.length>1)throw Error("Expected exactly one signature, got ".concat(n.length));if(i)throw Error("Both taproot and non-taproot signatures present.");var o=!!t.getInputWitnessUtxo(r),s=t.getInputRedeemScript(r),a=!!s;if(!(c=t.getInputPartialSig(r,n[0])))throw new Error("Expected partial signature for input "+r);if(o){if((h=new $i).writeVarInt(2),h.writeVarInt(c.length),h.writeSlice(c),h.writeVarInt(n[0].length),h.writeSlice(n[0]),t.setInputFinalScriptwitness(r,h.buffer()),a){if(!s||0==s.length)throw new Error("Expected non-empty redeemscript. Can't finalize intput "+r);var u=new $i;u.writeUInt8(s.length),u.writeSlice(s),t.setInputFinalScriptsig(r,u.buffer())}}else{var l=new $i;Io(l,c),Io(l,n[0]),t.setInputFinalScriptsig(r,l.buffer())}}else{var c,h;if(!(c=t.getInputTapKeySig(r)))throw Error("No taproot signature found");if(64!=c.length&&65!=c.length)throw Error("Unexpected length of schnorr signature.");(h=new $i).writeVarInt(1),h.writeVarSlice(c),t.setInputFinalScriptwitness(r,h.buffer())}_o(t,r)}}(r),S=function(t){var e,r,n=new $i;n.writeUInt32(t.getGlobalTxVersion());var i=!!t.getInputWitnessUtxo(0);i&&n.writeSlice(l.from([0,1]));var o=t.getGlobalInputCount();n.writeVarInt(o);for(var s=new $i,a=0;a<o;a++)n.writeSlice(t.getInputPreviousTxid(a)),n.writeUInt32(t.getInputOutputIndex(a)),n.writeVarSlice(null!==(e=t.getInputFinalScriptsig(a))&&void 0!==e?e:l.from([])),n.writeUInt32(t.getInputSequence(a)),i&&s.writeSlice(t.getInputFinalScriptwitness(a));var u=t.getGlobalOutputCount();for(n.writeVarInt(u),a=0;a<u;a++)n.writeUInt64(t.getOutputAmount(a)),n.writeVarSlice(t.getOutputScript(a));return n.writeSlice(s.buffer()),n.writeUInt32(null!==(r=t.getGlobalFallbackLocktime())&&void 0!==r?r:0),n.buffer()}(r),[2,S.toString("hex")]}}))}))},t.prototype.outputScriptAt=function(t,e,r){return Ro(this,void 0,void 0,(function(){var n,i,o,s;return Ao(this,(function(a){switch(a.label){case 0:if(!r)return[2,void 0];for(n=le(r),i=0;i<t.length;i++)if(t[i]!=n[i])throw new Error("Path ".concat(r," not in account ").concat(ue(t)));return[4,this.client.getExtendedPubkey(!1,n)];case 1:return o=a.sent(),s=ce(o),[2,{cond:e.spendingCondition([s]),pubkey:s}]}}))}))},t.prototype.setInput=function(t,e,r,n,o,s,a){return Ro(this,void 0,void 0,(function(){var s,u,c,h,p,f,d,g,v,y,w;return Ao(this,(function(E){switch(E.label){case 0:return s=r[0],u=r[1],c=r[2]?l.from(r[2],"hex"):void 0,null!=(h=r[3])&&t.setInputSequence(e,h),null!=a&&t.setInputSighashType(e,a),p=Oo(s,!0),f=i.p.hash256(p),[4,this.client.getExtendedPubkey(!1,n)];case 1:if(d=E.sent(),g=ce(d),!s.outputs)throw Error("Missing outputs array in transaction to sign");return v=s.outputs[u],y={scriptPubKey:v.script,redeemScript:c},w={cond:y,amount:v.amount},o.setInput(e,p,w,[g],[n]),t.setInputPreviousTxId(e,f),t.setInputOutputIndex(e,u),[2]}}))}))},t.prototype.signPsbt=function(t,e,r){return Ro(this,void 0,void 0,(function(){return Ao(this,(function(n){switch(n.label){case 0:return[4,this.client.signPsbt(t,e,l.alloc(32,0),r)];case 1:return n.sent().forEach((function(e,r){var n,i=t.getInputKeyDatas(r,io.BIP32_DERIVATION);if(1!=i.length){if(0==(n=t.getInputKeyDatas(r,io.TAP_BIP32_DERIVATION)).length)throw Error("Missing pubkey derivation for input ".concat(r));t.setInputTapKeySig(r,e)}else n=i[0],t.setInputPartialSig(r,n,e)})),[2]}}))}))},t}();function Lo(t){if("legacy"==t)return"pkh(@0)";if("p2sh"==t)return"sh(wpkh(@0))";if("bech32"==t)return"wpkh(@0)";if("bech32m"==t)return"tr(@0)";throw new Error("Unsupported address format "+t)}var Mo=globalThis&&globalThis.__assign||function(){return Mo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Mo.apply(this,arguments)},ko=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Uo=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Do={legacy:0,p2sh:1,bech32:2,cashaddr:3};function $o(t,e){return ko(this,void 0,void 0,(function(){var r,n,i,o,s,a,u,l,c,h,p,f,d;return Uo(this,(function(g){switch(g.label){case 0:if(r=Mo({verify:!1,format:"legacy"},e),n=r.path,i=r.verify,!((o=r.format)in Do))throw new Error("btc.getWalletPublicKey invalid format="+o);return s=ae(n),a=i?1:0,u=Do[o],[4,t.send(224,64,a,u,s)];case 1:return l=g.sent(),c=l[0],h=l[1+c],p=l.slice(1,1+c).toString("hex"),f=l.slice(1+c+1,1+c+1+h).toString("ascii"),d=l.slice(1+c+1+h,1+c+1+h+32).toString("hex"),[2,{publicKey:p,bitcoinAddress:f,chainCode:d}]}}))}))}var Co=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Go=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Bo=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Fo(t,e,r){return Co(this,void 0,void 0,(function(){var n,i,o,s;return Go(this,(function(a){switch(a.label){case 0:return i=!1,"number"==typeof r?(i=!0,(o=l.alloc(4)).writeUInt32BE(r,0),n=l.concat([o,e],e.length+4)):n=e,[4,t.send(224,66,i?0:128,0,n)];case 1:return s=a.sent(),[2,s.slice(0,s.length-2).toString("hex")]}}))}))}function Vo(t,e,r,n){return void 0===n&&(n=[]),Co(this,void 0,void 0,(function(){var i,o,s,a,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T,S,x,O,R,A,N,P,L,M,k=this;return Go(this,(function(U){switch(U.label){case 0:if(i=r.version,o=r.inputs,s=r.outputs,a=r.locktime,c=r.nExpiryHeight,h=r.extraData,!s||!a)throw new Error("getTrustedInput: locktime & outputs is expected");return p=n.includes("decred"),f=n.includes("stealthcoin"),d=function(e,r){return Co(k,void 0,void 0,(function(){var n,i,o,s,a,u,c,h,p,f,d;return Go(this,(function(g){switch(g.label){case 0:for(n=r||l.alloc(0),i=[],o=0;o!==e.length;)s=e.length-o>Gi?Gi:e.length-o,o+s!==e.length?i.push(e.slice(o,o+s)):i.push(l.concat([e.slice(o,o+s),n])),o+=s;0===e.length&&i.push(n),g.label=1;case 1:g.trys.push([1,6,7,8]),u=Bo(i),c=u.next(),g.label=2;case 2:return c.done?[3,5]:(h=c.value,[4,Fo(t,h)]);case 3:a=g.sent(),g.label=4;case 4:return c=u.next(),[3,2];case 5:return[3,8];case 6:return p=g.sent(),f={error:p},[3,8];case 7:try{c&&!c.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}return[7];case 8:return[2,a]}}))}))},g=function(e){return Fo(t,e)},[4,Fo(t,l.concat([r.version,r.timestamp||l.alloc(0),r.nVersionGroupId||l.alloc(0),So(o.length)]),e)];case 1:U.sent(),U.label=2;case 2:U.trys.push([2,8,9,10]),v=Bo(o),y=v.next(),U.label=3;case 3:return y.done?[3,7]:(w=y.value,E=f&&0===l.compare(i,l.from([2,0,0,0])),m=p?w.tree||l.from([0]):l.alloc(0),R=l.concat([w.prevout,m,E?l.from([0]):So(w.script.length)]),[4,Fo(t,R)]);case 4:return U.sent(),[4,p?g(l.concat([w.script,w.sequence])):E?g(w.sequence):d(w.script,w.sequence)];case 5:U.sent(),U.label=6;case 6:return y=v.next(),[3,3];case 7:return[3,10];case 8:return b=U.sent(),N={error:b},[3,10];case 9:try{y&&!y.done&&(P=v.return)&&P.call(v)}finally{if(N)throw N.error}return[7];case 10:return[4,Fo(t,So(s.length))];case 11:U.sent(),U.label=12;case 12:U.trys.push([12,17,18,19]),_=Bo(s),I=_.next(),U.label=13;case 13:return I.done?[3,16]:(T=I.value,R=l.concat([T.amount,p?l.from([0,0]):l.alloc(0),So(T.script.length),T.script]),[4,Fo(t,R)]);case 14:U.sent(),U.label=15;case 15:return I=_.next(),[3,13];case 16:return[3,19];case 17:return S=U.sent(),L={error:S},[3,19];case 18:try{I&&!I.done&&(M=_.return)&&M.call(_)}finally{if(L)throw L.error}return[7];case 19:return x=[],c&&c.length>0&&x.push(c),h&&h.length>0&&x.push(h),x.length&&(R=l.concat(x),O=p?R:l.concat([So(R.length),R])),[4,d(l.concat([a,O||l.alloc(0)]))];case 20:return A=U.sent(),(0,u.m)(A,"missing result in processScriptBlocks"),[2,A]}}))}))}var Ko=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},qo=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},jo=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Xo(t,e,r,n,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=[]);var a=s.includes("cashaddr")?3:i?s.includes("sapling")?5:o?4:2:0;return t.send(224,68,r?0:128,e?a:128,n)}function Wo(t,e,r,n,i,o,s,a){return void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===s&&(s=[]),void 0===a&&(a=!1),Ko(this,void 0,void 0,(function(){var u,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T,S,x,O,R;return qo(this,(function(A){switch(A.label){case 0:return u=l.concat([r.version,r.timestamp||l.alloc(0),r.nVersionGroupId||l.alloc(0),So(r.inputs.length)]),[4,Xo(t,e,!0,u,i,o,s)];case 1:A.sent(),c=0,h=s.includes("decred"),A.label=2;case 2:A.trys.push([2,15,16,17]),p=jo(r.inputs),f=p.next(),A.label=3;case 3:return f.done?[3,14]:(d=f.value,g=void 0,v=n[c].value,g=i?a&&n[c].trustedInput?l.from([1,v.length]):l.from([2]):n[c].trustedInput?l.from([1,n[c].value.length]):l.from([0]),u=l.concat([g,v,h?l.from([0]):l.alloc(0),So(d.script.length)]),[4,Xo(t,e,!1,u,i,o,s)]);case 4:if(A.sent(),y=[],w=0,0===d.script.length)y.push(d.sequence);else for(;w!==d.script.length;)E=d.script.length-w>Gi?Gi:d.script.length-w,w+E!==d.script.length?y.push(d.script.slice(w,w+E)):y.push(l.concat([d.script.slice(w,w+E),d.sequence])),w+=E;A.label=5;case 5:A.trys.push([5,10,11,12]),O=void 0,m=jo(y),b=m.next(),A.label=6;case 6:return b.done?[3,9]:(_=b.value,[4,Xo(t,e,!1,_,i,o,s)]);case 7:A.sent(),A.label=8;case 8:return b=m.next(),[3,6];case 9:return[3,12];case 10:return I=A.sent(),O={error:I},[3,12];case 11:try{b&&!b.done&&(R=m.return)&&R.call(m)}finally{if(O)throw O.error}return[7];case 12:c++,A.label=13;case 13:return f=p.next(),[3,3];case 14:return[3,17];case 15:return T=A.sent(),S={error:T},[3,17];case 16:try{f&&!f.done&&(x=p.return)&&x.call(p)}finally{if(S)throw S.error}return[7];case 17:return[2]}}))}))}function Ho(t,e,r,n){if(void 0===n&&(n=[]),!r)throw new Error("getTrustedInputBIP143: missing tx");if(n.includes("decred"))throw new Error("Decred does not implement BIP143");var i=Ct("sha256").update(Ct("sha256").update(Oo(r,!0)).digest()).digest(),o=l.alloc(4);o.writeUInt32LE(e,0);var s=r.outputs,a=r.locktime;if(!s||!a)throw new Error("getTrustedInputBIP143: locktime & outputs is expected");if(!s[e])throw new Error("getTrustedInputBIP143: wrong index");return(i=l.concat([i,o,s[e].amount])).toString("hex")}function zo(t){var e=1&t[64]?3:2,r=l.alloc(1);return r[0]=e,l.concat([r,t.slice(1,33)])}function Yo(t,e,r,n,i,o){void 0===o&&(o=[]);var s=o.includes("decred"),a=ae(e),u=l.alloc(4);u.writeUInt32BE(r,0);var c=s?l.concat([a,u,i||l.from([0,0,0,0]),l.from([n])]):l.concat([a,l.from([0]),u,l.from([n])]);return i&&!s&&(c=l.concat([c,i])),t.send(224,72,0,0,c).then((function(t){return t.length>0?(t[0]=48,t.slice(0,t.length-2)):t}))}var Zo=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Qo=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function Jo(t,e){var r=ae(e);return t.send(224,74,255,0,r)}function ts(t,e,r){return void 0===r&&(r=[]),Zo(this,void 0,void 0,(function(){var n,i,o,s;return Qo(this,(function(a){switch(a.label){case 0:if(n=0,128,r.includes("decred"))return[2,t.send(224,74,128,0,e)];a.label=1;case 1:return n<e.length?(i=n+Gi>=e.length?e.length-n:Gi,o=n+i===e.length?128:0,s=e.slice(n,n+i),[4,t.send(224,74,o,0,s)]):[3,3];case 2:return a.sent(),n+=i,[3,1];case 3:return[2]}}))}))}var es=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},rs=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ns=function(t){return es(void 0,void 0,void 0,(function(){var e,r,n,i,o,s,a,l,c;return rs(this,(function(h){switch(h.label){case 0:return[4,t.send(176,1,0,0)];case 1:return e=h.sent(),r=0,n=e[r++],(0,u.m)(1===n,"getAppAndVersion: format not supported"),i=e[r++],o=e.slice(r,r+=i).toString("ascii"),s=e[r++],a=e.slice(r,r+=s).toString("ascii"),l=e[r++],c=e.slice(r,r+=l),[2,{name:o,version:a,flags:c}]}}))}))};var is=globalThis&&globalThis.__assign||function(){return is=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},is.apply(this,arguments)},os=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},ss=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},as=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},us={lockTime:0,sigHashType:1,segwit:!1,additionals:[],onDeviceStreaming:function(t){},onDeviceSignatureGranted:function(){},onDeviceSignatureRequested:function(){}};function ls(t,e){return os(this,void 0,void 0,(function(){var r,n,i,o,s,u,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T,S,x,O,R,A,N,P,L,M,k,U,D,$,C,G,B,F,V,K,q,j,X,W,H,z,Y,Z,Q,J,tt,et,rt,nt,it,ot,st,at,ut,lt,ct,ht;return ss(this,(function(pt){switch(pt.label){case 0:if(r=is(is({},us),e),n=r.inputs,i=r.associatedKeysets,o=r.changePath,s=r.outputScriptHex,u=r.lockTime,c=r.sigHashType,h=r.segwit,p=r.initialTimestamp,f=r.additionals,d=r.expiryHeight,g=r.onDeviceStreaming,v=r.onDeviceSignatureGranted,y=r.onDeviceSignatureRequested,void 0!==(w=r.useTrustedInputForSegwit))return[3,4];pt.label=1;case 1:return pt.trys.push([1,3,,4]),[4,ns(t)];case 2:return E=pt.sent(),w=function(t){var e=t.version,r=t.name;return"Decred"!==r&&("Exchange"===r||Un.gte(e,"1.4.0"))}(E),[3,4];case 3:if(27904!==(m=pt.sent()).statusCode)throw m;return w=!1,[3,4];case 4:b=function(t,e){var r=n.length;if(!(r<3)){var i=r*t+e,o=2*r;g({progress:i/o,total:o,index:i})}},_=f.includes("decred"),I=f.includes("zcash"),T=f.includes("stealthcoin"),S=Date.now(),x=f.includes("sapling"),O=h&&f.includes("bech32"),R=h||!!f&&(f.includes("abc")||f.includes("gold")||f.includes("bip143"))||!!d&&!_,(A=l.alloc(4)).writeUInt32LE(u,0),N=l.alloc(0),P=l.alloc(0),L=l.alloc(4),d&&!_?L.writeUInt32LE(I?2147483653:x?2147483652:2147483651,0):T?L.writeUInt32LE(2,0):L.writeUInt32LE(1,0),M=[],k=[],U=[],D=[],$=!0,C=!1,G={inputs:[],version:L,timestamp:l.alloc(0)},B=R&&!w?Ho:Vo,F=l.from(s,"hex"),b(0,0),pt.label=5;case 5:pt.trys.push([5,11,12,13]),V=as(n),K=V.next(),pt.label=6;case 6:return K.done?[3,10]:(Z=K.value,C?[3,8]:[4,B(t,Z[1],Z[0],f)]);case 7:q=pt.sent(),(0,a.d)("hw","got trustedInput="+q),(j=l.alloc(4)).writeUInt32LE(Z.length>=4&&"number"==typeof Z[3]?Z[3]:Bi,0),M.push({trustedInput:!0,value:l.from(q,"hex"),sequence:j}),pt.label=8;case 8:X=Z[0].outputs,W=Z[1],X&&W<=X.length-1&&k.push(X[W]),d&&!_?(G.nVersionGroupId=l.from(I?[10,39,167,38]:x?[133,32,47,137]:[112,130,196,3]),G.nExpiryHeight=d,G.extraData=l.from(x?[0,0,0,0,0,0,0,0,0,0,0]:[0])):_&&(G.nExpiryHeight=d),pt.label=9;case 9:return K=V.next(),[3,6];case 10:return[3,13];case 11:return H=pt.sent(),ct={error:H},[3,13];case 12:try{K&&!K.done&&(ht=V.return)&&ht.call(V)}finally{if(ct)throw ct.error}return[7];case 13:if(G.inputs=n.map((function(t,e){var r=l.alloc(4);return r.writeUInt32LE(t.length>=4&&"number"==typeof t[3]?t[3]:Bi,0),{script:I?k[e].script:N,prevout:P,sequence:r}})),C)return[3,18];z=[],at=0,pt.label=14;case 14:return at<n.length?[4,$o(t,{path:i[at]})]:[3,17];case 15:Y=pt.sent(),b(0,at+1),z.push(Y),pt.label=16;case 16:return at++,[3,14];case 17:for(at=0;at<z.length;at++)D.push(zo(l.from(z[at].publicKey,"hex")));pt.label=18;case 18:return void 0!==p&&(G.timestamp=l.alloc(4),G.timestamp.writeUInt32LE(Math.floor(p+(Date.now()-S)/1e3),0)),y(),R?[4,Wo(t,!0,G,M,!0,!!d,f,w)]:[3,23];case 19:return pt.sent(),!C&&o?[4,Jo(t,o)]:[3,21];case 20:pt.sent(),pt.label=21;case 21:return[4,ts(t,F)];case 22:pt.sent(),pt.label=23;case 23:return d&&!_?[4,Yo(t,"",u,1,d)]:[3,25];case 24:pt.sent(),pt.label=25;case 25:at=0,pt.label=26;case 26:return at<n.length?(Z=n[at],Q=n[at].length>=3&&"string"==typeof Z[2]?l.from(Z[2],"hex"):h?l.concat([l.from([118,169,20]),Fi(D[at]),l.from([136,172])]):k[at].script,J=Object.assign({},G),tt=R?[M[at]]:M,R?J.inputs=[is(is({},J.inputs[at]),{script:Q})]:J.inputs[at].script=Q,[4,Wo(t,!R&&$,J,tt,R,!!d&&!_,f,w)]):[3,34];case 27:return pt.sent(),R?[3,31]:!C&&o?[4,Jo(t,o)]:[3,29];case 28:pt.sent(),pt.label=29;case 29:return[4,ts(t,F,f)];case 30:pt.sent(),pt.label=31;case 31:return $&&(v(),b(1,0)),[4,Yo(t,i[at],u,c,d,f)];case 32:et=pt.sent(),b(1,at+1),U.push(et),G.inputs[at].script=N,$&&($=!1),pt.label=33;case 33:return at++,[3,26];case 34:for(at=0;at<n.length;at++)h?(G.witness=l.alloc(0),O||(G.inputs[at].script=l.concat([l.from("160014","hex"),Fi(D[at])]))):(rt=l.alloc(1),nt=l.alloc(1),rt[0]=U[at].length,nt[0]=D[at].length,G.inputs[at].script=l.concat([rt,U[at],nt,D[at]])),it=R&&!w?0:4,G.inputs[at].prevout=M[at].value.slice(it,it+36);if(G.locktime=A,ot=l.concat([Oo(G,!1,G.timestamp,f),F]),h&&!_){for(st=l.alloc(0),at=0;at<n.length;at++)ut=l.concat([l.from("02","hex"),l.from([U[at].length]),U[at],l.from([D[at].length]),D[at]]),st=l.concat([st,ut]);ot=l.concat([ot,st])}return I||(ot=l.concat([ot,A]),d&&(ot=l.concat([ot,G.nExpiryHeight||l.alloc(0),G.extraData||l.alloc(0)]))),_&&(lt=l.from([G.inputs.length]),n.forEach((function(t,e){lt=l.concat([lt,l.from([0,0,0,0,0,0,0,0]),l.from([0,0,0,0]),l.from([255,255,255,255]),l.from([G.inputs[e].script.length]),G.inputs[e].script])})),ot=l.concat([ot,lt])),I&&(ot=l.concat([ot,l.from([0,0,0])])),[2,ot.toString("hex")]}}))}))}var cs=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},hs=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};var ps=globalThis&&globalThis.__assign||function(){return ps=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ps.apply(this,arguments)},fs=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},ds=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},gs=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vs={lockTime:0,sigHashType:1,segwit:!1,transactionVersion:1};var ys=globalThis&&globalThis.__assign||function(){return ys=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ys.apply(this,arguments)},ws=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Es=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},ms=function(){function t(t){this.transport=t,this.derivationsCache={}}return t.prototype.derivatePath=function(t){return ws(this,void 0,void 0,(function(){var e;return Es(this,(function(r){switch(r.label){case 0:return this.derivationsCache[t]?[2,this.derivationsCache[t]]:[4,$o(this.transport,{path:t})];case 1:return e=r.sent(),this.derivationsCache[t]=e,[2,e]}}))}))},t.prototype.getWalletXpub=function(t){var e=t.path,r=t.xpubVersion;return ws(this,void 0,void 0,(function(){var t,n,o,s,a,u;return Es(this,(function(c){switch(c.label){case 0:return t=le(e),n=t.slice(0,-1),[4,this.derivatePath(ue(n))];case 1:return o=c.sent(),[4,this.derivatePath(e)];case 2:return s=c.sent(),a=function(t){return function(t){return function(t){return(new i.v).update(t).digest()}(Is(t))}(t).slice(0,4)}(_s(l.from(o.publicKey,"hex"))),u=function(t,e,r,n,i,o){var s=bs(n);s[0]|=128;var a=l.concat([bs(t),l.from([e]),r,s,i,o]),u=function(t){return Is(Is(t))}(a).slice(0,4);return Jt.encode(l.concat([a,u]))}(r,t.length,a,t[t.length-1],l.from(s.chainCode,"hex"),_s(l.from(s.publicKey,"hex"))),[2,u]}}))}))},t.prototype.getWalletPublicKey=function(t,e){if("bech32m"===(null==e?void 0:e.format))throw new Error("Unsupported address format bech32m");return $o(this.transport,ys(ys({},e),{path:t}))},t.prototype.signMessageNew=function(t,e){return function(t,e){var r=e.path,i=e.messageHex;return cs(this,void 0,void 0,(function(){var e,o,s,a,u,c,h,p;return hs(this,(function(f){switch(f.label){case 0:e=n.s.fromString(r).toPathArray(),o=l.from(i,"hex"),s=0,a=function(){var r,n,i;return hs(this,(function(a){switch(a.label){case 0:return r=0===s?Gi-1-4*e.length-4:Gi,n=s+r>o.length?o.length-s:r,i=l.alloc(0===s?1+4*e.length+2+n:n),0===s?(i[0]=e.length,e.forEach((function(t,e){i.writeUInt32BE(t,1+4*e)})),i.writeUInt16BE(o.length,1+4*e.length),o.copy(i,1+4*e.length+2,s,s+n)):o.copy(i,0,s,s+n),[4,t.send(224,78,0,0===s?1:128,i)];case 1:return a.sent(),s+=n,[2]}}))},f.label=1;case 1:return s===o.length?[3,3]:[5,a()];case 2:return f.sent(),[3,1];case 3:return[4,t.send(224,78,128,0,l.from([0]))];case 4:return u=f.sent(),c=u[0]-48,0===(h=u.slice(4,4+u[3]))[0]&&(h=h.slice(1)),h=h.toString("hex"),s=4+u[3]+2,0===(p=u.slice(s,s+u[s-1]))[0]&&(p=p.slice(1)),p=p.toString("hex"),[2,{v:c,r:h,s:p}]}}))}))}(this.transport,{path:t,messageHex:e})},t.prototype.createPaymentTransactionNew=function(t){return arguments.length>1&&console.warn("@ledgerhq/hw-app-btc: createPaymentTransactionNew multi argument signature is deprecated. please switch to named parameters."),ls(this.transport,t)},t.prototype.signP2SHTransaction=function(t){return arguments.length>1&&console.warn("@ledgerhq/hw-app-btc: signP2SHTransaction multi argument signature is deprecated. please switch to named parameters."),function(t,e){return fs(this,void 0,void 0,(function(){var r,n,i,o,s,a,u,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T,S,x,O,R,A,N,P,L,M,k,U,D;return ds(this,(function($){switch($.label){case 0:r=ps(ps({},vs),e),n=r.inputs,i=r.associatedKeysets,o=r.outputScriptHex,s=r.lockTime,a=r.sigHashType,u=r.segwit,c=r.transactionVersion,h=l.alloc(0),p=l.alloc(0),(f=l.alloc(4)).writeUInt32LE(c,0),d=[],g=[],v=[],y=!0,w=!1,E={inputs:[],version:f},m=u?Ho:Vo,b=l.from(o,"hex"),$.label=1;case 1:$.trys.push([1,7,8,9]),_=gs(n),I=_.next(),$.label=2;case 2:return I.done?[3,6]:(N=I.value,w?[3,4]:[4,m(t,N[1],N[0])]);case 3:T=$.sent(),(R=l.alloc(4)).writeUInt32LE(N.length>=4&&"number"==typeof N[3]?N[3]:Bi,0),d.push({trustedInput:!1,value:u?l.from(T,"hex"):l.from(T,"hex").slice(4,40),sequence:R}),$.label=4;case 4:S=N[0].outputs,x=N[1],S&&x<=S.length-1&&g.push(S[x]),$.label=5;case 5:return I=_.next(),[3,2];case 6:return[3,9];case 7:return O=$.sent(),U={error:O},[3,9];case 8:try{I&&!I.done&&(D=_.return)&&D.call(_)}finally{if(U)throw U.error}return[7];case 9:for(A=0;A<n.length;A++)(R=l.alloc(4)).writeUInt32LE(n[A].length>=4&&"number"==typeof n[A][3]?n[A][3]:Bi,0),E.inputs.push({script:h,prevout:p,sequence:R});return u?[4,Wo(t,!0,E,d,!0)]:[3,12];case 10:return $.sent(),[4,ts(t,b)];case 11:$.sent(),$.label=12;case 12:A=0,$.label=13;case 13:return A<n.length?(N=n[A],P=n[A].length>=3&&"string"==typeof N[2]?l.from(N[2],"hex"):g[A].script,L=Object.assign({},E),M=u?[d[A]]:d,u?L.inputs=[ps(ps({},L.inputs[A]),{script:P})]:L.inputs[A].script=P,[4,Wo(t,!u&&y,L,M,u)]):[3,19];case 14:return $.sent(),u?[3,16]:[4,ts(t,b)];case 15:$.sent(),$.label=16;case 16:return[4,Yo(t,i[A],s,a)];case 17:k=$.sent(),v.push(u?k.toString("hex"):k.slice(0,k.length-1).toString("hex")),E.inputs[A].script=h,y&&(y=!1),$.label=18;case 18:return A++,[3,13];case 19:return[2,v]}}))}))}(this.transport,t)},t}();function bs(t){var e=l.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var _s=function(t){return l.concat([l.from([2+(1&t[64])]),t.slice(1,33)])};function Is(t){return Ct("sha256").update(t).digest()}var Ts,Ss=function(){function t(t,e){if(t.length!=e.length)throw new Error("keys and values should have the same length");for(var r=0;r<t.length-1;r++)if(t[r].toString("hex")>=t[r+1].toString("hex"))throw new Error("keys must be in strictly increasing order");this.keys=t,this.keysTree=new Yi(t.map((function(t){return Zi(t)}))),this.values=e,this.valuesTree=new Yi(e.map((function(t){return Zi(t)})))}return t.prototype.commitment=function(){return l.concat([So(this.keys.length),this.keysTree.getRoot(),this.valuesTree.getRoot()])},t}(),xs=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Os=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Rs=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},As=function(t){function e(r){var n=t.call(this)||this;n.inputMerkleMaps=[],n.outputMerkleMaps=[],r.copy(n),n.globalMerkleMap=e.createMerkleMap(n.globalMap);for(var i=0;i<n.getGlobalInputCount();i++)n.inputMerkleMaps.push(e.createMerkleMap(n.inputMaps[i]));n.inputMapCommitments=Rs([],Os(n.inputMerkleMaps.values()),!1).map((function(t){return t.commitment()}));for(i=0;i<n.getGlobalOutputCount();i++)n.outputMerkleMaps.push(e.createMerkleMap(n.outputMaps[i]));return n.outputMapCommitments=Rs([],Os(n.outputMerkleMaps.values()),!1).map((function(t){return t.commitment()})),n}return xs(e,t),e.prototype.getGlobalSize=function(){return this.globalMap.size},e.prototype.getGlobalKeysValuesRoot=function(){return this.globalMerkleMap.commitment()},e.createMerkleMap=function(t){var e=Rs([],Os(t.keys()),!1).sort(),r=e.map((function(e){var r=t.get(e);if(!r)throw new Error("No value for key "+e);return r})),n=e.map((function(t){return l.from(t,"hex")}));return new Ss(n,r)},e}(co),Ns=globalThis&&globalThis.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ps=globalThis&&globalThis.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},Ls=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},Ms=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.YIELD=16]="YIELD",t[t.GET_PREIMAGE=64]="GET_PREIMAGE",t[t.GET_MERKLE_LEAF_PROOF=65]="GET_MERKLE_LEAF_PROOF",t[t.GET_MERKLE_LEAF_INDEX=66]="GET_MERKLE_LEAF_INDEX",t[t.GET_MORE_ELEMENTS=160]="GET_MORE_ELEMENTS"}(Ts||(Ts={}));var ks,Us,Ds=function(){},$s=function(t){function e(e,r){var n=t.call(this)||this;return n.progressCallback=r,n.code=Ts.YIELD,n.results=e,n}return Ns(e,t),e.prototype.execute=function(t){return this.results.push(l.from(t.subarray(1))),this.progressCallback(),l.from("")},e}(Ds),Cs=function(t){function e(e,r){var n=t.call(this)||this;return n.code=Ts.GET_PREIMAGE,n.known_preimages=e,n.queue=r,n}return Ns(e,t),e.prototype.execute=function(t){var e=l.from(t.subarray(1));if(33!=e.length)throw new Error("Invalid request, unexpected trailing data");if(0!=e[0])throw new Error("Unsupported request, the first byte should be 0");for(var r=l.alloc(32),n=0;n<32;n++)r[n]=e[1+n];var i=r.toString("hex"),o=this.known_preimages.get(i);if(null!=o){var s=So(o.length),a=255-s.length-1,u=Math.min(a,o.length);if(u<o.length)for(n=u;n<o.length;n++)this.queue.push(l.from([o[n]]));return l.concat([s,l.from([u]),l.from(o.subarray(0,u))])}throw Error("Requested unknown preimage for: ".concat(i))},e}(Ds),Gs=function(t){function e(e,r){var n=t.call(this)||this;return n.code=Ts.GET_MERKLE_LEAF_PROOF,n.known_trees=e,n.queue=r,n}return Ns(e,t),e.prototype.execute=function(t){var e,r=l.from(t.subarray(1));if(r.length<34)throw new Error("Invalid request, expected at least 34 bytes");var n,i,o=new Ci(r),s=o.readSlice(32).toString("hex");try{n=o.readVarInt(),i=o.readVarInt()}catch{throw new Error("Invalid request, couldn't parse tree_size or leaf_index")}var a=this.known_trees.get(s);if(!a)throw Error("Requested Merkle leaf proof for unknown tree: ".concat(s));if(i>=n||a.size()!=n)throw Error("Invalid index or tree size.");if(0!=this.queue.length)throw Error("This command should not execute when the queue is not empty.");var u=a.getProof(i),c=Math.min(Math.floor(221/32),u.length),h=u.length-c;return h>0&&(e=this.queue).push.apply(e,Ls([],Ps(u.slice(-h)),!1)),l.concat(Ls([a.getLeafHash(i),l.from([u.length]),l.from([c])],Ps(u.slice(0,c)),!1))},e}(Ds),Bs=function(t){function e(e){var r=t.call(this)||this;return r.code=Ts.GET_MERKLE_LEAF_INDEX,r.known_trees=e,r}return Ns(e,t),e.prototype.execute=function(t){var e=l.from(t.subarray(1));if(64!=e.length)throw new Error("Invalid request, unexpected trailing data");for(var r=l.alloc(32),n=0;n<32;n++)r[n]=e.readUInt8(n);var i=r.toString("hex"),o=l.alloc(32);for(n=0;n<32;n++)o[n]=e.readUInt8(32+n);var s=o.toString("hex"),a=this.known_trees.get(i);if(!a)throw Error("Requested Merkle leaf index for unknown root: ".concat(i));var u=0,c=0;for(n=0;n<a.size();n++)if(a.getLeafHash(n).toString("hex")==s){c=1,u=n;break}return l.concat([l.from([c]),So(u)])},e}(Ds),Fs=function(t){function e(e){var r=t.call(this)||this;return r.code=Ts.GET_MORE_ELEMENTS,r.queue=e,r}return Ns(e,t),e.prototype.execute=function(t){if(1!=t.length)throw new Error("Invalid request, unexpected trailing data");if(0===this.queue.length)throw new Error("No elements to get");var e=this.queue[0].length;if(this.queue.some((function(t){return t.length!=e})))throw new Error("The queue contains elements with different byte length, which is not expected");var r=Math.floor(253/e),n=Math.min(r,this.queue.length),i=this.queue.splice(0,n);return l.concat(Ls([l.from([n]),l.from([e])],Ps(i),!1))},e}(Ds),Vs=function(){function t(t){var e,r;this.roots=new Map,this.preimages=new Map,this.yielded=[],this.queue=[],this.commands=new Map;var n=[new $s(this.yielded,t),new Cs(this.preimages,this.queue),new Bs(this.roots),new Gs(this.roots,this.queue),new Fs(this.queue)];try{for(var i=Ms(n),o=i.next();!o.done;o=i.next()){var s=o.value;if(this.commands.has(s.code))throw new Error("Multiple commands with code ".concat(s.code));this.commands.set(s.code,s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}return t.prototype.getYielded=function(){return this.yielded},t.prototype.addKnownPreimage=function(t){this.preimages.set(i.p.sha256(t).toString("hex"),t)},t.prototype.addKnownList=function(t){var e,r;try{for(var n=Ms(t),i=n.next();!i.done;i=n.next()){var o=i.value,s=l.concat([l.from([0]),o]);this.addKnownPreimage(s)}}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}var a=new Yi(t.map((function(t){return Zi(t)})));this.roots.set(a.getRoot().toString("hex"),a)},t.prototype.addKnownMapping=function(t){this.addKnownList(t.keys),this.addKnownList(t.values)},t.prototype.execute=function(t){if(0==t.length)throw new Error("Unexpected empty command");var e=t[0],r=this.commands.get(e);if(!r)throw new Error("Unexpected command code ".concat(e));return r.execute(t)},t}(),Ks=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},qs=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},js=globalThis&&globalThis.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.GET_PUBKEY=0]="GET_PUBKEY",t[t.REGISTER_WALLET=2]="REGISTER_WALLET",t[t.GET_WALLET_ADDRESS=3]="GET_WALLET_ADDRESS",t[t.SIGN_PSBT=4]="SIGN_PSBT",t[t.GET_MASTER_FINGERPRINT=5]="GET_MASTER_FINGERPRINT"}(ks||(ks={})),function(t){t[t.CONTINUE_INTERRUPTED=1]="CONTINUE_INTERRUPTED"}(Us||(Us={}));var Xs=function(){function t(t){this.transport=t}return t.prototype.makeRequest=function(t,e,r){return Ks(this,void 0,void 0,(function(){var n,i,o;return qs(this,(function(s){switch(s.label){case 0:return[4,this.transport.send(225,t,0,0,e,[36864,57344])];case 1:n=s.sent(),s.label=2;case 2:if(57344!==n.readUInt16BE(n.length-2))return[3,4];if(!r)throw new Error("Unexpected SW_INTERRUPTED_EXECUTION");return i=n.slice(0,-2),o=r.execute(i),[4,this.transport.send(248,Us.CONTINUE_INTERRUPTED,0,0,o,[36864,57344])];case 3:return n=s.sent(),[3,2];case 4:return[2,n.slice(0,-2)]}}))}))},t.prototype.getExtendedPubkey=function(t,e){return Ks(this,void 0,void 0,(function(){return qs(this,(function(r){switch(r.label){case 0:if(e.length>6)throw new Error("Path too long. At most 6 levels allowed.");return[4,this.makeRequest(ks.GET_PUBKEY,l.concat([l.from(t?[1]:[0]),se(e)]))];case 1:return[2,r.sent().toString("ascii")]}}))}))},t.prototype.getWalletAddress=function(t,e,r,n,i){return Ks(this,void 0,void 0,(function(){var o,s;return qs(this,(function(a){switch(a.label){case 0:if(0!==r&&1!==r)throw new Error("Change can only be 0 or 1");if(n<0||!Number.isInteger(n))throw new Error("Invalid address index");if(null!=e&&32!=e.length)throw new Error("Invalid HMAC length");return(o=new Vs((function(){}))).addKnownList(t.keys.map((function(t){return l.from(t,"ascii")}))),o.addKnownPreimage(t.serialize()),(s=l.alloc(4)).writeUInt32BE(n,0),[4,this.makeRequest(ks.GET_WALLET_ADDRESS,l.concat([l.from(i?[1]:[0]),t.getWalletId(),e||l.alloc(32,0),l.from([r]),s]),o)];case 1:return[2,a.sent().toString("ascii")]}}))}))},t.prototype.signPsbt=function(t,e,r,n){return Ks(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,p,f,d,g,v,y,w,E,m,b,_,I,T;return qs(this,(function(S){switch(S.label){case 0:if(i=new As(t),null!=r&&32!=r.length)throw new Error("Invalid HMAC length");(o=new Vs(n)).addKnownList(e.keys.map((function(t){return l.from(t,"ascii")}))),o.addKnownPreimage(e.serialize()),o.addKnownMapping(i.globalMerkleMap);try{for(s=js(i.inputMerkleMaps),a=s.next();!a.done;a=s.next())h=a.value,o.addKnownMapping(h)}catch(x){E={error:x}}finally{try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(E)throw E.error}}try{for(u=js(i.outputMerkleMaps),c=u.next();!c.done;c=u.next())h=c.value,o.addKnownMapping(h)}catch(x){b={error:x}}finally{try{c&&!c.done&&(_=u.return)&&_.call(u)}finally{if(b)throw b.error}}return o.addKnownList(i.inputMapCommitments),p=new Yi(i.inputMapCommitments.map((function(t){return Zi(t)}))).getRoot(),o.addKnownList(i.outputMapCommitments),f=new Yi(i.outputMapCommitments.map((function(t){return Zi(t)}))).getRoot(),[4,this.makeRequest(ks.SIGN_PSBT,l.concat([i.getGlobalKeysValuesRoot(),So(i.getGlobalInputCount()),p,So(i.getGlobalOutputCount()),f,e.getWalletId(),r||l.alloc(32,0)]),o)];case 1:S.sent(),d=o.getYielded(),g=new Map;try{for(v=js(d),y=v.next();!y.done;y=v.next())w=y.value,g.set(w[0],w.slice(1))}catch(x){I={error:x}}finally{try{y&&!y.done&&(T=v.return)&&T.call(v)}finally{if(I)throw I.error}}return[2,g]}}))}))},t.prototype.getMasterFingerprint=function(){return Ks(this,void 0,void 0,(function(){return qs(this,(function(t){return[2,this.makeRequest(ks.GET_MASTER_FINGERPRINT,l.from([]))]}))}))},t}();var Ws=globalThis&&globalThis.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}u((n=n.apply(t,e||[])).next())}))},Hs=globalThis&&globalThis.__generator||function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},zs=function(){function t(t,e){void 0===e&&(e="BTC"),this._lazyImpl=null,this.transport=t,t.decorateAppAPIMethods(this,["getWalletXpub","getWalletPublicKey","signP2SHTransaction","signMessageNew","createPaymentTransactionNew","getTrustedInput","getTrustedInputBIP143"],e)}return t.prototype.getWalletXpub=function(t){return this.getCorrectImpl().then((function(e){return e.getWalletXpub(t)}))},t.prototype.getWalletPublicKey=function(t,e){var r,n=this;return arguments.length>2||"boolean"==typeof e?(console.warn("btc.getWalletPublicKey deprecated signature used. Please switch to getWalletPublicKey(path, { format, verify })"),r={verify:!!e,format:arguments[2]?"p2sh":"legacy"}):r=e||{},this.getCorrectImpl().then((function(e){return!(e instanceof Po&&"bech32m"!=r.format)||r.verify&&0!=r.verify||function(t){var e=2147483648,r=le(t),n=function(t){return t>=e},i=function(t){return!t||t<e},o=function(t){return!t||0==t||1==t};return!!(r.length>=3&&r.length<=5&&[44+e,49+e,84+e,86+e].some((function(t){return t==r[0]}))&&[0+e,1+e].some((function(t){return t==r[1]}))&&n(r[2])&&o(r[3])&&i(r[4])||r.length>=4&&r.length<=6&&48+e==r[0]&&[0+e,1+e].some((function(t){return t==r[1]}))&&n(r[2])&&n(r[3])&&o(r[4])&&i(r[5]))}(t)?e.getWalletPublicKey(t,r):(console.warn("WARNING: Using deprecated device protocol to get the public key because\n        \n        * a non-standard path is requested, and\n        * verify flag is false\n        \n        The new protocol only allows export of non-standard paths if the \n        verify flag is true. Standard paths are (currently):\n\n        M/44'/(1|0)'/X'\n        M/49'/(1|0)'/X'\n        M/84'/(1|0)'/X'\n        M/86'/(1|0)'/X'\n        M/48'/(1|0)'/X'/Y'\n\n        followed by \"\", \"(0|1)\", or \"(0|1)/b\", where a and b are \n        non-hardened. For example, the following paths are standard\n        \n        M/48'/1'/99'/7'\n        M/86'/1'/99'/0\n        M/48'/0'/99'/7'/1/17\n\n        The following paths are non-standard\n\n        M/48'/0'/99'           // Not deepest hardened path\n        M/48'/0'/99'/7'/1/17/2 // Too many non-hardened derivation steps\n        M/199'/0'/1'/0/88      // Not a known purpose 199\n        M/86'/1'/99'/2         // Change path item must be 0 or 1\n\n        This compatibility safeguard will be removed in the future.\n        Please consider calling Btc.getWalletXpub() instead."),n.old().getWalletPublicKey(t,r))}))},t.prototype.signMessageNew=function(t,e){return this.old().signMessageNew(t,e)},t.prototype.createPaymentTransactionNew=function(t){return arguments.length>1&&console.warn("@ledgerhq/hw-app-btc: createPaymentTransactionNew multi argument signature is deprecated. please switch to named parameters."),this.getCorrectImpl().then((function(e){return e.createPaymentTransactionNew(t)}))},t.prototype.signP2SHTransaction=function(t){return this.old().signP2SHTransaction(t)},t.prototype.splitTransaction=function(t,e,r,n,i){return void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===i&&(i=[]),function(t,e,r,n,i){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===i&&(i=[]);var o,s,u=[],c=[],h=!1,p=0,f=l.alloc(0),d=l.alloc(0),g=l.alloc(0),v=l.alloc(0),y=i.includes("decred"),w=i.includes("zencash"),E=i.includes("zcash"),m=l.from(t,"hex"),b=m.slice(p,p+4),_=b.equals(l.from([3,0,0,128]))||b.equals(l.from([4,0,0,128]))||b.equals(l.from([5,0,0,128])),I=E&&b.equals(l.from([5,0,0,128]));p+=4,!r&&e&&0===m[p]&&0!==m[p+1]&&!w&&(p+=2,h=!0),r&&(f=m.slice(p,4+p),p+=4),_&&(g=m.slice(p,4+p),p+=4),I&&(s=m.slice(p+4,p+8),d=m.slice(p+8,p+12),p+=12);var T=To(m,p),S=T[0];p+=T[1];for(var x=0;x<S;x++){var O=m.slice(p,p+36);p+=36;var R=l.alloc(0),A=l.alloc(0);y?(A=m.slice(p,p+1),p+=1):(p+=(T=To(m,p))[1],R=m.slice(p,p+T[0]),p+=T[0]);var N=m.slice(p,p+4);p+=4,u.push({prevout:O,script:R,sequence:N,tree:A})}var P=(T=To(m,p))[0];for(p+=T[1],x=0;x<P;x++){var L=m.slice(p,p+8);p+=8,y&&(p+=2),p+=(T=To(m,p))[1],R=m.slice(p,p+T[0]),p+=T[0],c.push({amount:L,script:R})}if(h?(o=m.slice(p,-4),s=m.slice(m.length-4)):I||(s=m.slice(p,p+4)),p+=4,(_||y)&&!I&&(d=m.slice(p,p+4),p+=4),n&&(v=m.slice(p)),y){if(p+=(T=To(m,p))[1],T[0]!==S)throw new Error("splitTransaction: incoherent number of witnesses");for(x=0;x<S;x++)p+=8,p+=4,p+=4,p+=(T=To(m,p))[1],R=m.slice(p,p+T[0]),p+=T[0],u[x].script=R}var M={version:b,inputs:u,outputs:c,locktime:s,witness:o,timestamp:f,nVersionGroupId:g,nExpiryHeight:d,extraData:v};return(0,a.d)("btc","splitTransaction ".concat(t,":\n").concat(function(t){var e="TX";return e+=" version "+t.version.toString("hex"),t.locktime&&(e+=" locktime "+t.locktime.toString("hex")),t.witness&&(e+=" witness "+t.witness.toString("hex")),t.timestamp&&(e+=" timestamp "+t.timestamp.toString("hex")),t.nVersionGroupId&&(e+=" nVersionGroupId "+t.nVersionGroupId.toString("hex")),t.nExpiryHeight&&(e+=" nExpiryHeight "+t.nExpiryHeight.toString("hex")),t.extraData&&(e+=" extraData "+t.extraData.toString("hex")),t.inputs.forEach((function(t,r){var n=t.prevout,i=t.script,o=t.sequence;e+="\ninput ".concat(r,":"),e+=" prevout ".concat(n.toString("hex")),e+=" script ".concat(i.toString("hex")),e+=" sequence ".concat(o.toString("hex"))})),(t.outputs||[]).forEach((function(t,r){var n=t.amount,i=t.script;e+="\noutput ".concat(r,":"),e+=" amount ".concat(n.toString("hex")),e+=" script ".concat(i.toString("hex"))})),e}(M))),M}(t,e,r,n,i)},t.prototype.serializeTransactionOutputs=function(t){return xo(t)},t.prototype.getTrustedInput=function(t,e,r){return void 0===r&&(r=[]),Vo(this.transport,t,e,r)},t.prototype.getTrustedInputBIP143=function(t,e,r){return void 0===r&&(r=[]),Ho(this.transport,t,e,r)},t.prototype.getCorrectImpl=function(){return Ws(this,void 0,void 0,(function(){var t,e;return Hs(this,(function(r){switch(r.label){case 0:return(t=this._lazyImpl)?[2,t]:[4,this.inferCorrectImpl()];case 1:return e=r.sent(),this._lazyImpl=e,[2,e]}}))}))},t.prototype.inferCorrectImpl=function(){return Ws(this,void 0,void 0,(function(){var t,e;return Hs(this,(function(r){switch(r.label){case 0:return[4,ns(this.transport)];case 1:return t=r.sent(),e=function(t){return No.includes(t.name)&&Un.major(t.version)>=2}(t),e?[2,this.new()]:[2,this.old()]}}))}))},t.prototype.old=function(){return new ms(this.transport)},t.prototype.new=function(){return new Po(new Xs(this.transport))},t}()},7731:(t,e,r)=>{r.d(e,{m:()=>i});var n=function(t,e,r,n,i,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,o,s,a],c=0;(u=new Error(e.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}};const i=(0,r(9226).c)(n)},9035:(t,e,r)=>{r.d(e,{d:()=>o});var n=0,i=[],o=function(t,e,r){var o={type:t,id:String(++n),date:new Date};e&&(o.message=e),r&&(o.data=r),function(t){for(var e=0;e<i.length;e++)try{i[e](t)}catch(r){console.error(r)}}(o)};typeof window<"u"&&(window.__ledgerLogsListen=function(t){return i.push(t),function(){var e=i.indexOf(t);-1!==e&&(i[e]=i[i.length-1],i.pop())}})},8346:(t,e,r)=>{var n,i;r.d(e,{P:()=>A});var o=s;function s(t){var e=this;if(e instanceof s||(e=new s),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}function a(t,e,r){var n=e===t.head?new c(r,null,e,t):new c(r,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function u(t,e){t.tail=new c(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function l(t,e){t.head=new c(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function c(t,e,r,n){if(!(this instanceof c))return new c(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}s.Node=c,s.create=s,s.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},s.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},s.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},s.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)u(this,arguments[t]);return this.length},s.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)l(this,arguments[t]);return this.length},s.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},s.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},s.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},s.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},s.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},s.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},s.prototype.map=function(t,e){e=e||this;for(var r=new s,n=this.head;null!==n;)r.push(t.call(e,n.value,this)),n=n.next;return r},s.prototype.mapReverse=function(t,e){e=e||this;for(var r=new s,n=this.tail;null!==n;)r.push(t.call(e,n.value,this)),n=n.prev;return r},s.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=t(r,n.value,i),n=n.next;return r},s.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=t(r,n.value,i),n=n.prev;return r},s.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},s.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},s.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new s;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;null!==i&&n<t;n++)i=i.next;for(;null!==i&&n<e;n++,i=i.next)r.push(i.value);return r},s.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new s;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;null!==i&&n>e;n--)i=i.prev;for(;null!==i&&n>t;n--,i=i.prev)r.push(i.value);return r},s.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;null!==n&&r<t;r++)n=n.next;var i=[];for(r=0;n&&r<e;r++)i.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=a(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return i},s.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{(i||(i=1,n=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),n)(s)}catch{}const h=o,p=Symbol("max"),f=Symbol("length"),d=Symbol("lengthCalculator"),g=Symbol("allowStale"),v=Symbol("maxAge"),y=Symbol("dispose"),w=Symbol("noDisposeOnSet"),E=Symbol("lruList"),m=Symbol("cache"),b=Symbol("updateAgeOnGet"),_=()=>1;const I=(t,e,r)=>{const n=t[m].get(e);if(n){const e=n.value;if(T(t,e)){if(x(t,n),!t[g])return}else r&&(t[b]&&(n.value.now=Date.now()),t[E].unshiftNode(n));return e.value}},T=(t,e)=>{if(!e||!e.maxAge&&!t[v])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[v]&&r>t[v]},S=t=>{if(t[f]>t[p])for(let e=t[E].tail;t[f]>t[p]&&null!==e;){const r=e.prev;x(t,e),e=r}},x=(t,e)=>{if(e){const r=e.value;t[y]&&t[y](r.key,r.value),t[f]-=r.length,t[m].delete(r.key),t[E].removeNode(e)}};class O{constructor(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}}const R=(t,e,r,n)=>{let i=r.value;T(t,i)&&(x(t,r),t[g]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};var A=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[p]=t.max||1/0;const e=t.length||_;if(this[d]="function"!=typeof e?_:e,this[g]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[v]=t.maxAge||0,this[y]=t.dispose,this[w]=t.noDisposeOnSet||!1,this[b]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[p]=t||1/0,S(this)}get max(){return this[p]}set allowStale(t){this[g]=!!t}get allowStale(){return this[g]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[v]=t,S(this)}get maxAge(){return this[v]}set lengthCalculator(t){"function"!=typeof t&&(t=_),t!==this[d]&&(this[d]=t,this[f]=0,this[E].forEach((t=>{t.length=this[d](t.value,t.key),this[f]+=t.length}))),S(this)}get lengthCalculator(){return this[d]}get length(){return this[f]}get itemCount(){return this[E].length}rforEach(t,e){e=e||this;for(let r=this[E].tail;null!==r;){const n=r.prev;R(this,t,r,e),r=n}}forEach(t,e){e=e||this;for(let r=this[E].head;null!==r;){const n=r.next;R(this,t,r,e),r=n}}keys(){return this[E].toArray().map((t=>t.key))}values(){return this[E].toArray().map((t=>t.value))}reset(){this[y]&&this[E]&&this[E].length&&this[E].forEach((t=>this[y](t.key,t.value))),this[m]=new Map,this[E]=new h,this[f]=0}dump(){return this[E].map((t=>!T(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[E]}set(t,e,r){if((r=r||this[v])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,i=this[d](e,t);if(this[m].has(t)){if(i>this[p])return x(this,this[m].get(t)),!1;const o=this[m].get(t).value;return this[y]&&(this[w]||this[y](t,o.value)),o.now=n,o.maxAge=r,o.value=e,this[f]+=i-o.length,o.length=i,this.get(t),S(this),!0}const o=new O(t,e,i,n,r);return o.length>this[p]?(this[y]&&this[y](t,e),!1):(this[f]+=o.length,this[E].unshift(o),this[m].set(t,this[E].head),S(this),!0)}has(t){if(!this[m].has(t))return!1;const e=this[m].get(t).value;return!T(this,e)}get(t){return I(this,t,!0)}peek(t){return I(this,t,!1)}pop(){const t=this[E].tail;return t?(x(this,t),t.value):null}del(t){x(this,this[m].get(t))}load(t){this.reset();const e=Date.now();for(let r=t.length-1;r>=0;r--){const n=t[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const t=i-e;t>0&&this.set(n.k,n.v,t)}}}prune(){this[m].forEach(((t,e)=>I(this,e,!1)))}}},9308:(t,e,r)=>{r.d(e,{s:()=>a});var n=r(9226);const i=2147483648;var o=function(t){if(!Array.isArray(t))throw new Error("Input must be an Array");if(0===t.length)throw new Error("Path must contain at least one level");for(var e=0;e<t.length;e++)if("number"!=typeof t[e])throw new Error("Path element is not a number");this.path=t};o.validatePathArray=function(t){try{return o.fromPathArray(t),!0}catch{return!1}},o.validateString=function(t,e){try{return o.fromString(t,e),!0}catch{return!1}},o.fromPathArray=function(t){return new o(t)},o.fromString=function(t,e){if(/^m\//i.test(t))t=t.slice(2);else if(e)throw new Error("Root element is required");for(var r=t.split("/"),n=new Array(r.length),s=0;s<r.length;s++){var a=/(\d+)([hH\']?)/.exec(r[s]);if(null===a)throw new Error("Invalid input");if(n[s]=parseInt(a[1],10),n[s]>=i)throw new Error("Invalid child index");if("h"===a[2]||"H"===a[2]||"'"===a[2])n[s]+=i;else if(0!=a[2].length)throw new Error("Invalid modifier")}return new o(n)},o.prototype.toPathArray=function(){return this.path},o.prototype.toString=function(t,e){for(var r=new Array(this.path.length),n=0;n<this.path.length;n++){var o=this.path[n];r[n]=o&i?(o&~i)+(e?"h":"'"):o}return(t?"":"m/")+r.join("/")},o.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"};var s=o;const a=(0,n.c)(s)}}]);
//# sourceMappingURL=703.046faa14.chunk.js.map