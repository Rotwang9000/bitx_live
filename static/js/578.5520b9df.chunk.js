"use strict";(globalThis.webpackChunkwinbit32=globalThis.webpackChunkwinbit32||[]).push([[578],{73197:(e,t,n)=>{n.d(t,{getToolboxByChain:()=>B});var a=n(96252),r=n(97716),i=n(74941),s=n(20381),o=n(32293),c=n(34311),d=n(49493),l=n(31402),g=n(86719),p=n(86026),u={DOT:{prefix:0,network:"polkadot",displayName:"Polkadot Relay Chain",symbols:["DOT"],decimals:[10],standardAccount:"*25519",website:"https://polkadot.network"},FLIP:{prefix:2112,network:"chainflip",displayName:"Chainflip",symbols:["FLIP"],decimals:[18],standardAccount:"*25519",website:"https://chainflip.io/"},GENERIC:{prefix:42,network:"substrate",displayName:"Substrate",symbols:[],decimals:[],standardAccount:"*25519",website:"https://substrate.io/"}},w=function(e,t){return(0,r.qv)(e)?(0,i.V)(e):(0,o.F)(e,void 0,t)},f=function(e,t="ss58",n){return"hex"===t?(0,s.X)(e):(0,c.j)(e,n)},m=e=>"address"in e,h=(e,t)=>e.rpc.system.accountNextIndex(t),y=(e,t)=>{try{const n=w(e,t);return f(n,"ss58",t),!0}catch(n){return!1}},b=(e,{recipient:t,amount:n})=>e.tx.balances?.transferAllowDeath?.(t,n),k=({api:e,network:t,gasAsset:n,signer:r})=>({api:e,network:t,decodeAddress:w,encodeAddress:f,createKeyring:e=>(async(e,t)=>(await(0,d.C)(),new a.S({type:"sr25519",ss58Format:t}).addFromUri(e)))(e,t.prefix),getAddress:(e=r)=>m(e)?e.address:void 0,createTransfer:({recipient:t,assetValue:n})=>b(e,{recipient:t,amount:n.getBaseValue("number")}),getBalance:t=>(async(e,t,n)=>{const a=await(e.query.system?.account?.(n));return!a?.data?.free||a?.data?.isEmpty?[t.set(0)]:[t.set(l.Lm.fromBigInt(BigInt(a.data.free.toString()),t.decimal).getValue("string"))]})(e,n,t),validateAddress:e=>y(e,t.prefix),transfer:t=>(async(e,t,{recipient:n,assetValue:a,from:r})=>{const i=b(e,{recipient:n,amount:a.getBaseValue("number")}),s=m(t);if(!i)return;const o=r||(s?t.address:void 0);if(!o)throw new l.Oo("core_transaction_invalid_sender_address");const c=await h(e,o);return(await i.signAndSend(s?t:o,{signer:s?void 0:t,nonce:c}))?.toString()})(e,r,t),estimateTransactionFee:t=>(async(e,t,n,{recipient:a,assetValue:r,from:i})=>{const s=b(e,{recipient:a,amount:r.getBaseValue("number")}),o=i||m(t)&&t.address;if(!o)return;const c=await(s?.paymentInfo(o,{nonce:await h(e,o)}))||{partialFee:0};return n.set(l.Lm.fromBigInt(BigInt(c.partialFee.toString()),n.decimal).getValue("string"))})(e,r,n,t),sign:e=>{if(m(r))return(async(e,t)=>await t.signAsync(e))(r,e);throw new l.Oo("core_wallet_not_keypair_wallet","Signer does not have keyring pair capabilities required for signing.")},broadcast:(e,t)=>(async(e,t)=>t?e.send(t):(await e.send()).toString())(e,t),signAndBroadcast:(e,t)=>{if(m(r))return((e,t,n)=>n?t.signAndSend(e,n):t.signAndSend(e).toString())(r,e,t);throw new l.Oo("core_wallet_not_keypair_wallet","Signer does not have keyring pair capabilities required for signing.")}}),v=async({providerUrl:e,generic:t,chain:n,signer:a})=>{const r=new g.E(e),i=await p.G.create({provider:r}),s=l.An.from({chain:n});return k({api:i,signer:a,gasAsset:s,network:t?u.GENERIC:u[n]})},A=async({providerUrl:e,signer:t,generic:n=!1})=>{const a=new g.E(e),r=await p.G.create({provider:a}),i=l.An.from({chain:l.sW.Chainflip});return{...await v({chain:l.sW.Chainflip,signer:t,providerUrl:e,generic:n}),getBalance:async e=>async function(e,t){const{balance:n}=await(e.query.flip?.account?.(t));return[i.set(l.Lm.fromBigInt(BigInt(n.toString()),i.decimal).getValue("string"))]}(r,e)}},B=(e,t)=>{switch(e){case l.sW.Chainflip:return A(t);case l.sW.Polkadot:return(({providerUrl:e,signer:t,generic:n=!1})=>v({providerUrl:e||l.vl.Polkadot,chain:l.sW.Polkadot,generic:n,signer:t}))(t);default:throw new Error(`Chain ${e} is not supported`)}}}}]);
//# sourceMappingURL=578.5520b9df.chunk.js.map