"use strict";(globalThis.webpackChunkwinbit32=globalThis.webpackChunkwinbit32||[]).push([[65,765],{90065:(t,e,r)=>{r.d(e,{default:()=>a});var n=r(14806),i=r(24876),o=r(42765),s=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){t.done?i(t.value):function(t){return t instanceof r?t:new r((function(e){e(t)}))}(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())}))};class a{constructor(t,e="CSM"){this.transport=t,t.decorateAppAPIMethods(this,["getAddress","sign","getAppConfiguration"],e)}getAppConfiguration(){return this.transport.send(85,0,0,0).then((t=>({test_mode:0!==t[0],version:t[1]+"."+t[2]+"."+t[3],device_locked:1===t[4],major:t[1]})))}serializePath(t){const e=n.d.Buffer.alloc(20);return e.writeUInt32LE((2147483648|t[0])>>>0,0),e.writeUInt32LE((2147483648|t[1])>>>0,4),e.writeUInt32LE((2147483648|t[2])>>>0,8),e.writeUInt32LE(t[3],12),e.writeUInt32LE(t[4],16),e}serializeHRP(t){if(null==t||0===t.length||t.length>83)throw new Error("Invalid HRP");const e=n.d.Buffer.alloc(1+t.length);return e.writeUInt8(t.length,0),e.write(t,1),e}getAddress(t,e,r){const o=i.b.fromString(t).toPathArray(),s=this.serializePath(o),a=n.d.Buffer.concat([this.serializeHRP(e),s]);return this.transport.send(85,4,r?1:0,0,a,[36864]).then((t=>({address:n.d.Buffer.from(t.slice(33,-2)).toString(),publicKey:n.d.Buffer.from(t.slice(0,33)).toString("hex")})))}foreach(t,e){function r(t,n,i){return t>=n.length?i:e(n[t],t).then((function(e){return i.push(e),r(t+1,n,i)}))}return Promise.resolve().then((()=>r(0,t,[])))}sign(t,e){return s(this,void 0,void 0,(function*(){const r=i.b.fromString(t).toPathArray(),s=this.serializePath(r),a=[];a.push(s);const c=n.d.Buffer.from(e);for(let t=0;t<c.length;t+=250){let e=t+250;t>c.length&&(e=c.length),a.push(c.slice(t,e))}let h={};return this.foreach(a,((t,e)=>this.transport.send(85,2,0===e?0:e+1===a.length?2:1,0,t,[36864,27014]).then((t=>h=t)))).then((()=>{const t=h.slice(-2),e=256*t[0]+t[1];let r=null;if(h.length>2&&(r=h.slice(0,h.length-2)),27014===e)throw new o.Pc;return{signature:r,return_code:e}}))}))}}},42765:(t,e,r)=>{r.d(e,{$u:()=>c,DisconnectedDevice:()=>i,FB:()=>a,PS:()=>d,Pc:()=>s,WC:()=>f,el:()=>n,rZ:()=>I,um:()=>u,vs:()=>o,wp:()=>h});const n=t=>{class e extends Error{constructor(r,n,i){if(super(r||t,i),Object.setPrototypeOf(this,e.prototype),this.name=t,n)for(const t in n)this[t]=n[t];if(i&&function(t){return"object"==typeof t}(i)&&"cause"in i&&!("cause"in this)){const t=i.cause;this.cause=t,"stack"in t&&(this.stack=this.stack+"\nCAUSE: "+t.stack)}}}return e};const i=n("DisconnectedDevice"),o=n("DisconnectedDeviceDuringOperation"),s=n("UserRefusedOnDevice"),a=n("TransportOpenUserCancelled"),c=n("TransportInterfaceNotAvailable"),h=n("TransportRaceCondition"),u=n("TransportWebUSBGestureRequired");var E,l;(l=E||(E={})).Unknown="Unknown",l.LocationServicesDisabled="LocationServicesDisabled",l.LocationServicesUnauthorized="LocationServicesUnauthorized",l.BluetoothScanStartFailed="BluetoothScanStartFailed";class d extends Error{constructor(t,e){const r="TransportError";super(t||r),this.name=r,this.message=t,this.stack=new Error(t).stack,this.id=e}}const f={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};class I extends Error{constructor(t,{canBeMappedToChildError:e=!0}={}){const r=Object.keys(f).find((e=>f[e]===t))||"UNKNOWN_ERROR",n=function(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}(t)||r,i=`Ledger device: ${n} (0x${t.toString(16)})`;if(super(i),this.name="TransportStatusError",this.statusCode=t,this.statusText=r,Object.setPrototypeOf(this,I.prototype),e&&t===f.LOCKED_DEVICE)return new _(i)}}class _ extends I{constructor(t){super(f.LOCKED_DEVICE,{canBeMappedToChildError:!1}),t&&(this.message=t),this.name="LockedDeviceError",Object.setPrototypeOf(this,_.prototype)}}},24876:(t,e,r)=>{r.d(e,{b:()=>a});var n=r(14806);const i=2147483648;var o=function(t){if(!Array.isArray(t))throw new Error("Input must be an Array");if(0===t.length)throw new Error("Path must contain at least one level");for(var e=0;e<t.length;e++)if("number"!=typeof t[e])throw new Error("Path element is not a number");this.path=t};o.validatePathArray=function(t){try{return o.fromPathArray(t),!0}catch{return!1}},o.validateString=function(t,e){try{return o.fromString(t,e),!0}catch{return!1}},o.fromPathArray=function(t){return new o(t)},o.fromString=function(t,e){if(/^m\//i.test(t))t=t.slice(2);else if(e)throw new Error("Root element is required");for(var r=t.split("/"),n=new Array(r.length),s=0;s<r.length;s++){var a=/(\d+)([hH\']?)/.exec(r[s]);if(null===a)throw new Error("Invalid input");if(n[s]=parseInt(a[1],10),n[s]>=i)throw new Error("Invalid child index");if("h"===a[2]||"H"===a[2]||"'"===a[2])n[s]+=i;else if(0!=a[2].length)throw new Error("Invalid modifier")}return new o(n)},o.prototype.toPathArray=function(){return this.path},o.prototype.toString=function(t,e){for(var r=new Array(this.path.length),n=0;n<this.path.length;n++){var o=this.path[n];r[n]=o&i?(o&~i)+(e?"h":"'"):o}return(t?"":"m/")+r.join("/")},o.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"};var s=o;const a=(0,n.g)(s)}}]);
//# sourceMappingURL=65.2b2b5d1c.chunk.js.map